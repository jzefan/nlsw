{"version":3,"sources":["main.js"],"names":["left_side_width","fix_sidebar","$","hasClass","slimscroll","height","window","color","_fix","css","content","click","e","preventDefault","width","toggleClass","removeClass","bind","this","addClass","tooltip","box","parents","first","bf","find","slideDown","slideUp","alwaysVisible","size","each","group","tree","resize","iCheck","checkboxClass","radioClass","change","file","val","replace","text","fn","boxRefresh","options","settings","extend","trigger","source","onLoadStart","onLoadDone","overlay","append","call","load","remove","console","log","jQuery","btn","children","menu","isActive","show","parent","pad","parseInt","margin-left","center","position","top","outerHeight","scrollTop","left","outerWidth","scrollLeft","nlApp","datatable_tabletools","sSwfPath","aButtons","sExtends","sButtonText","lang","sProcessing","sLengthMenu","sZeroRecords","sInfo","sInfoEmpty","sInfoFiltered","sInfoPostFix","sSearch","sUrl","sEmptyTable","sLoadingRecords","sInfoThousands","oPaginate","sFirst","sPrevious","sNext","sLast","oAria","sSortAscending","sSortDescending","getDataTableParams","withTools","xInner","dataTableParams","aaSorting","iDisplayLength","aLengthMenu","sPaginationType","sScrollX","sScrollXInner","language","sDom","oTableTools","parseFloatHTML","value","parseFloat","addZero","i","date2Str","date","noMinute","Object","prototype","toString","m","moment","format","isMoment","getDateTimePickerOptions","autoclose","useCurrent","todayBtn","collapse","pickTime","leftPad","number","length","str","getOrder","order_no","item_no","sort_pinyin","arr","sort","a","b","localeCompare","isEmpty","variable","isExist","undefined","elementEventRegister","elem","event_name","event_handler","on","select2Setup","element","params","storeData","select2","minimumInputLength","inputLength","placeholder","initSelection","callback","ajax","url","dataType","quietMillis","data","term","page","q","limit","results","targetData","formatResult","formatSelection","getAJAXRequest","type","JSON","stringify","contentType","ajaxRequestHandle","route","method","action_msg","afterDone","request","done","ok","bootbox","alert","response","fail","jqXHR","textStatus","unselected","prop","getRowChildren","idx","getTableCellChildren","tr_click","elements","func","off","me","index","setHtmlElementDisabled","disabled","nodeName","toLowerCase","showHtmlElement","hide","setElementValue","getElementValue","isJqueryElementEmpty","isNumeric","obj","isArray","numberIntValider","min","max","v","isNaN","numberFloatValider","initValue","minValue","maxValue","old","Number","getStrValue","isFinite","Math","floor","toFixedStr","sameBill","bill_no","order_item_no","sortByKey","array","key","order","x","y","num","precision","abs","round","toFixed","toFixedNumber","initSelect","items","needEmpty","selectedValue","empty","forEach","item","indexOf","getSelectValue","increaseArea","show_search_data","dataTable","html","popover","blogs","local_html_data","objEditor","CKEDITOR","toolbar","name","groups","btnSubmit","removePost","self","confirm","result","title","document","getBody","getHtml","local_user","userid","Date","yyyymmdd_cn","prepend","toggle","yyyy","getFullYear","mm","getMonth","dd","getDate","getMinutes","h","getHours","Array","from","to","rest","slice","push","apply","String","args","arguments","match","ForceNumericOnly","keydown","charCode","keyCode","pleaseWaitDiv","showPleaseWait","cursor","modal","backdrop","keyboard","hidePleaseWait","setTitle","tableToExcel","table","filename","s","c","ctx","worksheet","location","href","p","btoa","unescape","encodeURIComponent","saveToExcel","bills","sheetname","trArr","price","getInvoicePriceInfo","status","brand_no","billing_name","sales_dep","thickness","len","size_type","totalCustomerPrice","totalVehPrice","collection_price","weight","block_num","total_weight","ship_warehouse","contract_no","create_date","shipping_date","creater","shipper","join","getStrByStatus","bill","inner_convert","state","totCustPrice","totVehPrice","price_html","ves_veh_price_html","tn","invoices","inv","veh_ves_name","w","veh_ves_price","vehicles","vo","send_num","send_weight","veh_name","veh_price","customer_price","customerPriceHtml","vehPriceHtml","totalNumber","getAllList","needCheck","field","sub_field","res","makeOption","operationEN2CN","SearchHandlerD","uiElems","sField","sOperation","bApply","iFieldValue","sFieldValue","iFieldValueDate","iFieldValueDateGrp","iFieldValue2","sFieldValue2","iFieldValueDate2","iFieldValueDateGrp2","fieldValGrp2","bAnd","bOr","bDelete","bExec","bOK","thead","tbody","div_result_show","result_show","runOngoing","fields","name_cn","name_en","operations","noOperation","selectOne","createTreeNode","ref","sel","get_selected","create_node","select_node","open_node","get_text","get_parent","deselect_all","initial","opt","datetimepicker","oper","jstree","core","animation","check_callback","opened","selected","operation","fieldname","stopImmediatePropagation","isDate","v2","createNode","delete_node","json","get_json","get","isNeedAnalysis","parse","_setDataAndShow","okEventHandler","html_row_str","waybill_no","vehicle_vessel_name","ship_name","ship_customer","ship_date","ship_to","username","FilterElementD","elemName","initOptions","dropRight","withSelectedAll","next","visibleOptions","option","buttonWidth","maxHeight","enableFiltering","filterPlaceholder","buttonText","select","labels","attr","onChange","checked","includeSelectAllOption","selectAllText","selectAllValue","multiselect","rebuild","selectedValues","selectAll","selectNone","rebuildAndSelectAll","disalbed"],"mappings":"AAWA,IAAIA,gBAAkB,IAsItB,SAASC,cAEFC,EAAE,QAAQC,SAAS,UAKxBD,EAAE,YAAYE,WAAW,CACvBC,OAASH,EAAEI,QAAQD,SAAWH,EAAE,WAAWG,SAAY,KACvDE,MAAO,oBA7IXL,EAAE,WACA,aAuFA,SAASM,IAEP,IAAIH,EAASH,EAAEI,QAAQD,SAAWH,EAAE,kBAAkBG,SAAWH,EAAE,kBAAkBG,SACrFH,EAAE,YAAYO,IAAI,aAAcJ,EAAS,MACzC,IAAIK,EAAUR,EAAE,YAAYG,SAEdA,EAAVK,EAEFR,EAAE,0BAA0BO,IAAI,aAAcC,EAAU,MAGxDR,EAAE,0BAA0BO,IAAI,aAAcJ,EAAS,MA/F3DH,EAAE,6BAA6BS,MAAM,SAAUC,GAC7CA,EAAEC,iBAGEX,EAAEI,QAAQQ,SAAW,KACvBZ,EAAE,kBAAkBa,YAAY,UAChCb,EAAE,cAAcc,YAAY,iBAC5Bd,EAAE,eAAec,YAAY,UAC7Bd,EAAE,kBAAkBa,YAAY,cAGhCb,EAAE,cAAca,YAAY,iBAC5Bb,EAAE,eAAea,YAAY,aAKjCb,EAAE,QAAQe,KAAK,aAAc,WAC3Bf,EAAEgB,MAAMC,SAAS,WAChBF,KAAK,WAAY,WAClBf,EAAEgB,MAAMF,YAAY,WAItBd,EAAE,2BAA2BkB,UAK7BlB,EAAE,4BAA4BS,MAAM,WAElC,IAAIU,EAAMnB,EAAEgB,MAAMI,QAAQ,QAAQC,QAE9BC,EAAKH,EAAII,KAAK,0BACbJ,EAAIlB,SAAS,kBAIhBkB,EAAIL,YAAY,iBAChBQ,EAAGE,cAJHL,EAAIF,SAAS,iBACbK,EAAGG,aAWPzB,EAAE,iBAAiBE,WAAW,CAC5BC,OAAQ,QACRuB,eAAe,EACfC,KAAM,QACLpB,IAAI,QAAS,QAMhBP,EAAE,wCAAwC4B,KAAK,WAC7C,IAAIC,EAAQ7B,EAAEgB,MACdhB,EAAEgB,MAAMO,KAAK,QAAQd,MAAM,SAAUC,GACnCmB,EAAMN,KAAK,eAAeT,YAAY,UACtCd,EAAEgB,MAAMC,SAAS,UACjBP,EAAEC,qBAKNX,EAAE,0BAA0BS,MAAM,WAEtBT,EAAEgB,MAAMI,QAAQ,QAAQC,QAC9BI,YAINzB,EAAE,sBAAsB8B,OA0BxBxB,IAEAN,EAAE,YAAY+B,OAAO,WACnBzB,IACAP,gBAIFA,cAOAC,EAAE,+CAA+CgC,OAAO,CACtDC,cAAe,oBACfC,WAAY,mBAGdlC,EAAE,kBAAkBmC,OAAO,WACzB,IAAIC,EAAOpC,EAAEgB,MAAMqB,MAAMC,QAAQ,mBAAoB,IACrDtC,EAAE,aAAauC,KAAKH,GACpBpC,EAAE,aAAauC,KAAKvC,EAAEgB,MAAMqB,WA6BhC,SAAWrC,GACT,aAEAA,EAAEwC,GAAGC,WAAa,SAAUC,GAG1B,IAAIC,EAAW3C,EAAE4C,OAAO,CAEtBC,QAAS,eAETC,OAAQ,GAERC,YAAa,SAAU5B,KAEvB6B,WAAY,SAAU7B,MAGrBuB,GAGCO,EAAUjD,EAAE,8DAEhB,OAAOgB,KAAKY,KAAK,WAEf,GAAwB,KAApBe,EAASG,OAAb,CAOA,IAAI3B,EAAMnB,EAAEgB,MAEDG,EAAII,KAAKoB,EAASE,SAASxB,QAGjCZ,MAAM,SAAUC,GAavB,IAAeS,EAZXT,EAAEC,kBAYSQ,EAVLA,GAYJ+B,OAAOD,GAEXN,EAASI,YAAYI,KAAKhC,GAXxBA,EAAII,KAAK,aAAa6B,KAAKT,EAASG,OAAQ,WAchD,IAAc3B,GAAAA,EAbHA,GAeLI,KAAK0B,GAASI,SAElBV,EAASK,WAAWG,KAAKhC,YAnCnBmC,SACFA,QAAQC,IAAI,mDA1BtB,CA+DGC,QA0BF,SAAUxD,GACT,aAEAA,EAAEwC,GAAGV,KAAO,WAEV,OAAOd,KAAKY,KAAK,WACf,IAAI6B,EAAMzD,EAAEgB,MAAM0C,SAAS,KAAKrC,QAC5BsC,EAAO3D,EAAEgB,MAAM0C,SAAS,kBAAkBrC,QAC1CuC,EAAW5D,EAAEgB,MAAMf,SAAS,UAG5B2D,IACFD,EAAKE,OACLJ,EAAIC,SAAS,kBAAkBrC,QAAQP,YAAY,iBAAiBG,SAAS,kBAG/EwC,EAAIhD,MAAM,SAAUC,GAClBA,EAAEC,iBACEiD,GAEFD,EAAKlC,UACLmC,GAAW,EACXH,EAAIC,SAAS,kBAAkBrC,QAAQP,YAAY,iBAAiBG,SAAS,iBAC7EwC,EAAIK,OAAO,MAAMhD,YAAY,YAG7B6C,EAAKnC,YACLoC,GAAW,EACXH,EAAIC,SAAS,kBAAkBrC,QAAQP,YAAY,iBAAiBG,SAAS,iBAC7EwC,EAAIK,OAAO,MAAM7C,SAAS,aAK9B0C,EAAKpC,KAAK,UAAUK,KAAK,WACvB,IAAImC,EAAMC,SAAShE,EAAEgB,MAAMT,IAAI,gBAAkB,GAEjDP,EAAEgB,MAAMT,IAAI,CAAC0D,cAAeF,EAAM,YArC1C,CA2CEP,QAGD,SAAUxD,GACT,aACAwD,OAAOhB,GAAG0B,OAAS,SAAUJ,GAW3B,OATEA,EADEA,EACO9C,KAAK8C,SAEL1D,OAEXY,KAAKT,IAAI,CACP4D,SAAY,WACZC,KAAUpE,EAAE8D,GAAQ3D,SAAWa,KAAKqD,eAAiB,EAAKrE,EAAE8D,GAAQQ,YAAc,KAClFC,MAAWvE,EAAE8D,GAAQlD,QAAUI,KAAKwD,cAAgB,EAAKxE,EAAE8D,GAAQW,aAAe,OAE7EzD,MAbX,CAeEwC,QAEF,IA6SIkB,MA7SAC,qBAAuB,CACzBC,SAAY,4DACZC,SAAY,CACV,CACEC,SAAY,OACZC,YAAe,MAEjB,CACED,SAAY,MACZC,YAAe,iBAIjBC,KAAO,CACTC,YAAe,SACfC,YAAe,gBACfC,aAAgB,SAChBC,MAAS,sCACTC,WAAc,sBACdC,cAAiB,kBACjBC,aAAgB,GAChBC,QAAW,MACXC,KAAQ,GACRC,YAAe,SACfC,gBAAmB,SACnBC,eAAkB,IAClBC,UAAa,CACXC,OAAU,KACVC,UAAa,KACbC,MAAS,KACTC,MAAS,MAEXC,MAAS,CACPC,eAAkB,YAClBC,gBAAmB,cAIvB,SAASC,mBAAmBC,EAAWC,GACrC,IAAIC,EAAkB,CACpBC,UAAa,CAAC,CAAC,EAAG,QAClBC,eAAkB,GAClBC,YAAe,CAAC,CAAC,GAAI,GAAI,GAAI,KAAM,GAAI,CAAC,GAAI,GAAI,GAAI,IAAK,QACzDC,gBAAmB,eACnBC,SAAY,OACZC,cAAiBP,EACjBQ,SAAY/B,KACZgC,KAAQ,oBAOV,OAJIV,IACFE,EAAgBS,YAActC,sBAGzB6B,EA8GT,SAASU,eAAeC,GACtB,OAAOC,WAAWD,EAAM7E,QAAQ,cAAe,MAAQ,EAGzD,SAAS+E,QAAQC,GAIf,OAHIA,EAAI,KACNA,EAAI,IAAMA,GAELA,EAgBT,SAASC,SAASC,EAAMC,GACtB,GAAID,EAAM,CACR,GAA6C,kBAAzCE,OAAOC,UAAUC,SAASzE,KAAKqE,IAA6C,iBAATA,EAAmB,CACxF,IAAIK,EAAIC,OAAON,GACf,OAAIC,EACKI,EAAEE,OAAO,cAETF,EAAEE,OAAO,oBAGf,GAAID,OAAOE,SAASR,GACvB,OAAIC,EACKD,EAAKO,OAAO,cAEZP,EAAKO,OAAO,oBAIjBF,EAAIC,OAAON,GACf,OAAIC,EACKI,EAAEE,OAAO,cAETF,EAAEE,OAAO,oBAIpB,MAAO,GAIX,SAASE,2BACP,MAAO,CACLC,WAAW,EACXC,YAAY,EACZC,UAAU,EACVrB,SAAU,QACVsB,UAAU,EACVC,UAAU,GA2Cd,SAASC,QAAQC,EAAQC,GAEvB,IADA,IAAIC,EAAM,GAAKF,EACRE,EAAID,OAASA,GAClBC,EAAM,IAAMA,EAGd,OAAOA,EAGT,SAASC,SAASC,EAAUC,GAC1B,OAAOD,EAAW,IAAML,QAAQM,EAAS,GAG3C,SAASC,YAAYC,GACnB,OAAOA,EAAIC,KAAK,SAAUC,EAAGC,GAC3B,OAAOD,EAAEE,cAAcD,KAI3B,SAASE,QAAQC,GACf,YAA4B,IAAbA,IAA6BA,GAAY,IAAMA,EAASZ,OAGzE,SAASa,QAAQD,GACf,YAA4B,IAAZA,GAA4BE,MAAaF,EAG3D,SAASG,qBAAqBC,EAAMC,EAAYC,GAC1CF,EAAKhB,QACPgB,EAAKG,GAAGF,EAAYC,GAuBxB,SAASE,aAAaC,EAASC,EAAQC,GACrCF,EAAQG,QAAQ,CACdC,mBAAoBH,EAAOI,YAC3BC,YAAaL,EAAOK,YACpBC,cAAe,SAAUP,EAASQ,KAElCC,KAAM,CACJC,IAAKT,EAAOS,IACZC,SAAU,OACVC,YAAa,IACbC,KAAM,SAAUC,EAAMC,GACpB,MAAO,CACLC,EAAGF,EACHG,OAAQ,IAGZC,QAAS,SAAUL,EAAME,GAIvB,OAHIb,GACFA,EAAUW,GAEL,CAACK,QAASL,EAAKM,cAG1BC,aAAc,SAAUP,GACtB,MAAO,oCAAsCA,EAAKpI,KAAO,UAE3D4I,gBAAiB,SAAUR,GACzB,OAAOA,EAAKpI,QAKlB,SAAS6I,eAAeZ,EAAKa,EAAMV,GACjC,OAAO3K,EAAEuK,KAAK,CACZC,IAAKA,EACLa,KAAMA,EACNV,KAAMW,KAAKC,UAAUZ,GACrBF,SAAU,OACVe,YAAa,qBAIjB,SAASC,kBAAkBC,EAAOC,EAAQhB,EAAMiB,EAAYC,GAC1D,IAAIC,EAAUV,eAAeM,EAAOC,EAAQhB,GAC5CmB,EAAQC,KAAK,SAAUpB,GACjBA,EAAKqB,GACY,eAAfJ,EACEtC,QAAQuC,IACVA,IAGFI,QAAQC,MAAMN,EAAa,KAAM,WAC3BtC,QAAQuC,IACVA,MAKNI,QAAQC,MAAMN,EAAa,MAAQjB,EAAKwB,YAG5CL,EAAQM,KAAK,SAAUC,EAAOC,GAC5BL,QAAQC,MAAMN,EAAa,OAASU,KAIxC,SAASC,WAAWzC,GACdA,EAAQrB,QACVqB,EAAQ0C,KAAK,iBAAkB,GAInC,SAASC,eAAe3C,EAAS4C,GAC/B,OAAO5C,EAAQvI,KAAK,SAAWmL,EAAM,KAGvC,SAASC,qBAAqB7C,EAAS4C,GACrC,OAAO5C,EAAQvI,KAAK,SAAWmL,EAAM,KAGvC,SAASE,SAASC,EAAUC,GACJ,EAAlBD,EAASpE,SACXoE,EAASE,IAAI,SACbF,EAASjD,GAAG,QAAS,SAAUlJ,GAC7B,IAAIsM,EAAKhN,EAAEgB,MACX6L,EAAS/L,YAAY,uBACrBkM,EAAG/L,SAAS,uBAEZ6L,EAAKpM,EAAGsM,EAAGC,YAKjB,SAASC,uBAAuBzD,EAAM0D,GACpC,GAAkB,EAAd1D,EAAKhB,OAAY,CACnB,IAAI4C,EAAO5B,EAAK,GAAG2D,SAASC,cACf,UAAThC,GAA6B,WAATA,GAA8B,aAATA,EAC3C5B,EAAK+C,KAAK,WAAYW,GAElBA,EACF1D,EAAKxI,SAAS,YAEdwI,EAAK3I,YAAY,aAMzB,SAASwM,gBAAgB7D,EAAM5F,GACX,EAAd4F,EAAKhB,SACH5E,EACF4F,EAAK5F,OAEL4F,EAAK8D,QAKX,SAASC,gBAAgB/D,EAAMtC,GAC7B,GAAkB,EAAdsC,EAAKhB,OAAY,CACnB,IAAI4C,EAAO5B,EAAK,GAAG2D,SAASC,cACf,UAAThC,GAA6B,WAATA,GAA8B,aAATA,EAC3C5B,EAAKpH,IAAI8E,GAETsC,EAAKlH,KAAK4E,IAKhB,SAASsG,gBAAgBhE,GACvB,GAAkB,EAAdA,EAAKhB,OAAY,CACnB,IAAI4C,EAAO5B,EAAK,GAAG2D,SAASC,cAC5B,MAAa,UAAThC,GAA6B,WAATA,GAA8B,aAATA,EACpC5B,EAAKpH,MAELoH,EAAKlH,OAIhB,MAAO,GAGT,SAASmL,qBAAqBjE,GAC5B,OAAuB,IAAhBA,EAAKhB,OAGd,SAASkF,UAAUC,GACjB,OAAQpK,OAAOqK,QAAQD,IAAiC,GAAzBA,EAAMxG,WAAWwG,GAGlD,SAASE,iBAAiBrE,EAAMsE,EAAKC,GACnC,IAAIC,EAAIxE,EAAKpH,MAAMC,QAAQ,UAAW,IAYtC,OAXA2L,EAAIjK,SAASiK,GACTC,MAAMD,IAAMA,EAAIF,GAClBE,EAAIF,EACJtE,EAAKpH,IAAI0L,KACIC,EAAJC,IACTA,EAAID,GACJvE,EAAKpH,IAAI4L,IAKJA,EAGT,SAASE,mBAAmB1E,EAAM2E,EAAWC,EAAUC,GACrD,IAAIL,EAAIxE,EAAKpH,MACTkM,EAAMN,EACV,OAAI7E,QAAQ6E,IACVxE,EAAKpH,IAAI,IACFgM,IAGJV,UAAUM,IAGTA,EAAII,IACNJ,EAAII,GAEFC,GAAgBA,EAAJL,IACdA,EAAIK,IANNL,EAAIG,EAUFG,GAAON,GACTxE,EAAKpH,IAAI4L,GAGJO,OAAOP,IAGhB,SAASQ,YAAYtH,GACnB,OAAIuH,SAASvH,GACU,iBAAVA,EACLwH,KAAKC,MAAMzH,KAAWA,EACjBA,EAAMS,WAENiH,WAAW1H,EAAO,GAAG7E,QAAQ,mCAAoC,MAKnE6E,EAGF,GAIX,SAAS2H,SAAS7F,EAAGC,GACnB,OAAQD,EAAE8F,UAAY7F,EAAE6F,SAAWpG,SAASM,EAAEL,SAAUK,EAAE+F,iBAAmBrG,SAASO,EAAEN,SAAUM,EAAE8F,eAGtG,SAASC,UAAUC,EAAOC,EAAKC,GAC7B,OAAOF,EAAMlG,KAAK,SAAUC,EAAGC,GAC7B,IAAImG,EAAIpG,EAAEkG,GACNG,EAAIpG,EAAEiG,GACV,MAAc,QAAVC,EACOC,EAAIC,GAAM,EAAUA,EAAJD,EAAS,EAAI,EAE7BA,EAAIC,EAAK,EAAUA,EAAJD,GAAU,EAAI,IAK5C,SAASR,WAAWU,EAAKC,GACvB,OAAIb,KAAKc,IAAIF,GAAO,KACX,OAMGZ,KAAKe,QAAQH,EAAM,IAAMC,IAAc,KAAOA,IAAYG,QAAQH,GAIhF,SAASI,cAAcL,EAAKC,GAC1B,OAAIb,KAAKc,IAAIF,GAAO,KACX,MAKKZ,KAAKe,QAAQH,EAAM,IAAMC,IAAc,KAAOA,IAAYG,QAAQH,GAIlF,SAASK,WAAW/F,EAASgG,EAAOC,EAAWC,GAC7ClG,EAAQmG,QACJH,EAAMrH,QACJsH,GACFjG,EAAQ5G,OAAO,2BAGjB4M,EAAMI,QAAQ,SAAUC,GACtBrG,EAAQ5G,OAAO,kBAAoBiN,EAAO,KAAOA,EAAO,eAGtDH,EACEF,EAAMM,QAAQJ,GAAiB,EACjClG,EAAQ5G,OAAO,kBAAoB8M,EAAgB,cAAgBA,EAAgB,aAGnFlG,EAAQzH,IAAI2N,GAIdzD,WAAWzC,IAGNkG,IACPlG,EAAQ5G,OAAO,2BACf4G,EAAQ5G,OAAO,kBAAoB8M,EAAgB,cAAgBA,EAAgB,cAIvF,SAASK,eAAevG,GACtB,IAAIzH,EAAMyH,EAAQzH,MAKlB,MAJY,WAARA,IACFkK,WAAWzC,GACXzH,EAAM,IAEDA,EAniBTrC,EAAE,WACAA,EAAE,qBAAqBuB,KAAK,SAASK,KAAK,WACxCZ,KAAKmG,MAAQ,KAGfnH,EAAE,eAAegC,OAAO,CACtBC,cAAe,yBACfC,WAAY,sBACZoO,aAAc,QAEhBtQ,EAAE,kBAAkBgC,OAAO,CACzBC,cAAe,yBACfC,WAAY,sBACZoO,aAAc,QAGhB,IAAIC,EAAmBvQ,EAAE,qBACK,EAA1BuQ,EAAiB9H,QACnB8H,EAAiBC,UAAUnK,oBAAmB,EAAM,SAGtDrG,EAAE,2BAA2BkB,QAAQ,CAAC2B,QAAS,QAAS4N,MAAM,IAC9DzQ,EAAE,2BAA2B0Q,QAAQ,CAAC7N,QAAS,QAAS4N,MAAM,IAG9D,IAAIE,EAAQ3Q,EAAE,iBACd,GAAmB,EAAf2Q,EAAMlI,OAAY,CACpBkI,EAAMF,KAAKG,iBACX,IAAIC,EAAYC,SAASxO,QAAQ,UAAW,CAC1CyO,QAAS,CACP,CACEC,KAAM,YACNC,OAAQ,CAAC,YAAa,QACtBnB,MAAO,CAAC,MAAO,OAAQ,QAAS,YAAa,gBAAiB,IAAK,OAAQ,SAE7E,CACEkB,KAAM,cACNC,OAAQ,CAAC,cAAe,WACxBnB,MAAO,CAAC,OAAQ,SAAU,YAAa,SAAU,YAAa,cAAe,IAAK,iBAEpF,CACEkB,KAAM,YACNC,OAAQ,CAAC,OAAQ,SAAU,SAAU,QAAS,QAC9CnB,MAAO,CAAC,eAAgB,eAAgB,IAAK,UAAW,SAAU,IAAK,aAAc,IAAK,cAAe,gBAAiB,eAAgB,eAAgB,IAAK,UAAW,UAAW,aAEvL,CAACkB,KAAM,QAASlB,MAAO,CAAC,OAAQ,WAChC,CAACkB,KAAM,SAAUlB,MAAO,CAAC,QAAS,QAAS,iBAAkB,SAAU,cAAe,cACtF,CAACkB,KAAM,SAAUlB,MAAO,CAAC,SAAU,SAAU,OAAQ,aACrD,CAACkB,KAAM,SAAUlB,MAAO,CAAC,YAAa,YACtC,CAACkB,KAAM,QAASlB,MAAO,CAAC,WAAY,kBAIpCoB,EAAYlR,EAAE,gBAyClB,SAASmR,EAAWC,GAClBnF,QAAQoF,QAAQ,mBAAoB,SAAUC,GACxCA,IACFF,EAAK/N,SACLrD,EAAE,gBAAgBuN,OAClB9B,kBAAkB,eAAgB,OAAQ,CAACgF,KAAME,EAAMF,QAAS,MAChEzQ,EAAE,gBAAgB6D,UA7CxB7D,EAAE,cAAc4J,GAAG,QAAS,WAC1B5J,EAAE,gBAAgBuN,OAClBD,gBAAgBtN,EAAE,gBAAgB,GAClCkN,uBAAuBgE,GAAW,KAGpCA,EAAUtH,GAAG,QAAS,WACpB,IAAI2H,EAAQvR,EAAE,eAAeqC,MAC7B,GAAqB,IAAjBkP,EAAM9I,OAAV,CAIA,IAAIgI,EAAOI,EAAUW,SAASC,UAAUC,UACxC,GAAoB,IAAhBjB,EAAKhI,OAAT,CAKA,IAAIjI,EAAU,6KAA+K+Q,EAAQ,gDAAkDI,WAAWC,OAAS,YAAa,IAAIC,MAAOC,cAAgB,OAASrB,EAAO,SACnUhF,kBAAkB,eAAgB,OAAQ,CAACgF,KAAMjQ,GAAU,KAAM,WAC/DmQ,EAAMoB,QAAQvR,GACdR,EAAE,gBAAgBuN,OAClBD,gBAAgBtN,EAAE,gBAAgB,GAClCA,EAAE,gBAAgB4J,GAAG,QAAS,WAC5BuH,EAAWnR,EAAEgB,MAAM8C,YAGrBoJ,uBAAuBgE,GAAW,UAblCjF,QAAQC,MAAM,sBALdD,QAAQC,MAAM,eAsBlBlM,EAAE,gBAAgB4J,GAAG,QAAS,WAC5B5J,EAAE,gBAAgBgS,WAGpBhS,EAAE,gBAAgB4J,GAAG,QAAS,WAC5BuH,EAAWnR,EAAEgB,MAAM8C,eA2BzB+N,KAAKlK,UAAUmK,YAAc,SAAUrK,GACrC,IAAIwK,EAAOjR,KAAKkR,cAActK,WAC1BuK,GAAMnR,KAAKoR,WAAa,GAAGxK,WAC3ByK,EAAKrR,KAAKsR,UAAU1K,WACxB,GAAIH,EACF,OAAOwK,EAAO,KAAqB,IAAdE,EAAG1J,OAAe0J,EAAK,IAAMA,EAAG,IAAM,KAAqB,IAAdE,EAAG5J,OAAe4J,EAAK,IAAMA,EAAG,IAElG,IAAIxK,EAAIR,QAAQrG,KAAKuR,cACjBC,EAAInL,QAAQrG,KAAKyR,YACrB,OAAOR,EAAO,KAAqB,IAAdE,EAAG1J,OAAe0J,EAAK,IAAMA,EAAG,IAAM,KAAqB,IAAdE,EAAG5J,OAAe4J,EAAK,IAAMA,EAAG,IAAM,IAAMG,EAAI,IAAM3K,GA8C5H6K,MAAM/K,UAAUtE,OAAS,SAAUsP,EAAMC,GACvC,IAAIC,EAAO7R,KAAK8R,OAAOF,GAAMD,GAAQ,GAAK3R,KAAKyH,QAE/C,OADAzH,KAAKyH,OAASkK,EAAO,EAAI3R,KAAKyH,OAASkK,EAAOA,EACvC3R,KAAK+R,KAAKC,MAAMhS,KAAM6R,IAG1BI,OAAOtL,UAAUI,SACpBkL,OAAOtL,UAAUI,OAAS,WACxB,IAAImL,EAAOC,UACX,OAAOnS,KAAKsB,QAAQ,WAAY,SAAU8Q,EAAO5K,GAC/C,YAA8B,IAAhB0K,EAAK1K,GAAyB0K,EAAK1K,GAAU4K,MAKjE5P,OAAOhB,GAAG6Q,iBAAmB,WAC3B,OAAOrS,KAAKY,KAAK,WACf5B,EAAEgB,MAAMsS,QAAQ,SAAU5S,GACxB,IAAIyO,EAAMzO,EAAE6S,UAAY7S,EAAE8S,SAAW,EAGrC,OACO,GAAPrE,GACO,GAAPA,GACO,IAAPA,GACO,IAAPA,GACO,KAAPA,GACO,KAAPA,GACQ,IAAPA,GAAaA,GAAO,IACb,IAAPA,GAAaA,GAAO,IACb,IAAPA,GAAaA,GAAO,SA0C3BzK,MAAQA,OAAS,WACf,IAAI+O,EAAgBzT,EAAE,igBACtB,MAAO,CACL0T,eAAgB,WACd1T,EAAE,QAAQO,IAAI,CAACoT,OAAU,SACzBF,EAAcG,MAAM,CAACC,SAAU,SAAUC,UAAU,IAAQF,MAAM,SAEnEG,eAAgB,WACd/T,EAAE,QAAQO,IAAI,CAACoT,OAAU,YACzBF,EAAcG,MAAM,SAEtBI,SAAU,SAAUzC,GAClBkC,EAAgBzT,EAAE,kQAAoQuR,EAAQ,8PAZnR,GAkTjB,IAAI0C,aAYK,SAAUC,EAAOlD,EAAMmD,GAC5B,IAVmBC,EAGGC,EAOlBC,EAAM,CAACC,UAAWvD,GAAQ,YAAakD,MAAOA,GAClD9T,OAAOoU,SAASC,KAbR,yCAKcJ,EAQ+BC,EAXlCF,EADR,ygBAKA9R,QAAQ,WAAY,SAAUuF,EAAG6M,GACxC,OAAOL,EAAEK,KAJJtU,OAAOuU,KAAKC,SAASC,mBAAmBT,OAcrD,SAASU,YAAYC,EAAOC,GAC1B,GAAmB,EAAfD,EAAMtM,OAAY,CACpB,IAAIwM,EAAQ,GACZA,EAAMlC,KAAK,wSAEX,IADA,IAAIrK,EAAM,OACDpB,EAAI,EAAGA,EAAI,KAAMA,EACxBoB,GAAO,QAAUpB,EAAI,SAEvBoB,GAAO,QACPqM,EAAM7E,QAAQ,SAAUhH,GACtB,IAAIgM,EAAQC,oBAAoBjM,GAChC+L,EAAMlC,KAAKrK,EAAIX,OAAOmB,EAAEkM,OAAQlM,EAAE6F,QAAS7F,EAAEN,SAAUM,EAAE8F,cACvD9F,EAAEmM,SAAWnM,EAAEmM,SAAW,GAC1BnM,EAAEoM,aAAepM,EAAEoM,aAAe,GAClCpM,EAAEqM,UAAYrM,EAAEqM,UAAY,GAC5B9G,YAAYvF,EAAEsM,WAAY/G,YAAYvF,EAAEtI,OAAQ6N,YAAYvF,EAAEuM,KAC9DvM,EAAEwM,UAAYxM,EAAEwM,UAAY,GAAIjH,YAAYyG,EAAMS,oBAAqBlH,YAAYyG,EAAMU,eAAgBnH,YAAYvF,EAAE2M,kBACvHpH,YAAYvF,EAAE4M,QAASrH,YAAYvF,EAAE6M,WAAYtH,YAAYvF,EAAE8M,cAC/D9M,EAAE+M,eAAiB/M,EAAE+M,eAAiB,GACtC/M,EAAEgN,YAAchN,EAAEgN,YAAc,GAChC3O,SAAS2B,EAAEiN,aAAc5O,SAAS2B,EAAEkN,eACpClN,EAAEmN,QAAUnN,EAAEmN,QAAU,GAAInN,EAAEoN,QAAUpN,EAAEoN,QAAU,OAGxDrC,aAAagB,EAAMsB,KAAK,MAAOvB,QAE/B/I,QAAQC,MAAM,WAIlB,SAASsK,eAAejU,EAAM6S,GAC5B,MAAe,QAAXA,EACK,+BAAiC7S,EAAO,UAC3B,QAAX6S,EACF,4BAA8B7S,EAAO,UACxB,QAAX6S,EACF,6BAA+B7S,EAAO,UACzB,QAAX6S,EACF,+BAAiC7S,EAAO,UAC3B,UAAX6S,EACF,gCAAkC7S,EAAO,UAC5B,QAAX6S,EACF,2BAA6B7S,EAAO,UACvB,QAAX6S,EACF,+BAAiC7S,EAAO,UAExC,gCAAkCA,EAAO,UAIpD,SAAS4S,oBAAoBsB,GAC3B,SAASC,EAAchC,EAAGiC,GACxB,OAAY,EAAJjC,EAAS8B,eAAe/H,YAAYiG,GAAIiC,GAAS,oCAG3D,IAAIC,EAAe,EACfC,EAAc,EACdC,EAAa,GACbC,EAAqB,GACrBC,EAAK,EACLtO,EAAM,4DA0BV,OAzBA+N,EAAKQ,SAAS/G,QAAQ,SAAUgH,GAC9B,GAAIA,EAAIC,aAAc,CACpBH,GAAME,EAAI3H,IACV,IAAI6H,EAAqB,EAAjBX,EAAKV,UAAgBmB,EAAI3H,IAAMkH,EAAKX,OAASoB,EAAIpB,OAOzD,GANAc,GAAgBM,EAAIhC,MAAQkC,EAC5BN,GAAcpO,EAAIX,OAAOmP,EAAIC,aAAc1I,YAAY2I,GAAIV,EAAcQ,EAAIhC,MAAOuB,EAAKrB,SAEzFyB,GAAeK,EAAIG,cAAgBD,EACnCL,GAAsBrO,EAAIX,OAAOmP,EAAIC,aAAc1I,YAAY2I,GAAIV,EAAcQ,EAAIG,cAAeZ,EAAKrB,SAErG8B,EAAII,SAAS7O,OAAQ,CAEvByO,EAAII,SAASpH,QAAQ,SAAUqH,GAC7BH,EAAqB,EAAjBX,EAAKV,UAAgBwB,EAAGC,SAAWf,EAAKX,OAASyB,EAAGE,YACxDV,GAHS,kEAGkBhP,OAAOwP,EAAGG,SAAUjJ,YAAY2I,GAAIV,EAAca,EAAGI,UAAWlB,EAAKrB,SAC7E,EAAfmC,EAAGI,YACLd,GAAeU,EAAGI,UAAYP,SAOxCX,EAAKmB,eAAiBhB,EAEf,CACLiB,kBAAmBf,EACnBgB,aAAcf,EACdpB,mBAAoBiB,EACpBhB,cAAeiB,EACfkB,YAAaf,GAIjB,SAASgB,WAAWC,EAAWlP,EAAKmP,EAAOC,GACzC,IAAc7Q,EAAGmO,EAAb2C,EAAM,GACV,GAAIH,EACF,GAAIE,GAAaA,EAAU1P,OACzB,IAAKnB,EAAI,EAAGmO,EAAM1M,EAAIN,OAAQnB,EAAImO,IAAOnO,EAAG,CAC/ByB,EAAIzB,GACV4Q,GAAOhI,QAAQ,SAAUzG,GAC5B,IAAIpH,EAAMoH,EAAK0O,GACX9V,GAAO+V,EAAIhI,QAAQ/N,GAAO,GAC5B+V,EAAIrF,KAAK1Q,UAKf,IAAKiF,EAAI,EAAGmO,EAAM1M,EAAIN,OAAQnB,EAAImO,IAAOnO,EAAG,CAC1C,IAAIjF,EAAM0G,EAAIzB,GAAG4Q,GACb7V,GAAO+V,EAAIhI,QAAQ/N,GAAO,GAC5B+V,EAAIrF,KAAK1Q,QAKf,GAAI8V,GAAaA,EAAU1P,OACzB,IAAKnB,EAAI,EAAGmO,EAAM1M,EAAIN,OAAQnB,EAAImO,IAAOnO,EAAG,CAC/ByB,EAAIzB,GACV4Q,GAAOhI,QAAQ,SAAUzG,GACxBA,EAAK0O,IACPC,EAAIrF,KAAKtJ,EAAK0O,WAKpB,IAAK7Q,EAAI,EAAGmO,EAAM1M,EAAIN,OAAQnB,EAAImO,IAAOnO,EACnCyB,EAAIzB,GAAG4Q,IACTE,EAAIrF,KAAKhK,EAAIzB,GAAG4Q,IAMxB,OAAOE,EAGT,SAASC,WAAWrH,GAClB,MAAO,kBAAoBA,EAAO,KAAOA,EAAO,YAOlD,SAASsH,eAAe/V,GACtB,MAAY,WAARA,EACK,KACU,MAARA,EACF,KACU,OAARA,EACF,MACU,MAARA,EACF,KACU,MAARA,EACF,KACU,OAARA,EACF,OACU,OAARA,EACF,OACU,MAARA,EACF,UADF,EAKT,IAAIgW,eAAiB,SAAUlN,GAC7BrK,KAAKwX,QAAU,CACbC,OAAQzY,EAAE,sBACV0Y,WAAY1Y,EAAE,eACd2Y,OAAQ3Y,EAAE,gBACV4Y,YAAa5Y,EAAE,cACf6Y,YAAa7Y,EAAE,cACf8Y,gBAAiB9Y,EAAE,mBACnB+Y,mBAAoB/Y,EAAE,yBACtBgZ,aAAchZ,EAAE,eAChBiZ,aAAcjZ,EAAE,eAChBkZ,iBAAkBlZ,EAAE,oBACpBmZ,oBAAqBnZ,EAAE,0BACvBoZ,aAAcpZ,EAAE,mBAChB8B,KAAM9B,EAAE,0BACRqZ,KAAMrZ,EAAE,eACRsZ,IAAKtZ,EAAE,cACPuZ,QAASvZ,EAAE,eACXwZ,MAAOxZ,EAAE,gBACTyZ,IAAKzZ,EAAE,cACPkU,MAAOlU,EAAE,iBACT0Z,MAAO1Z,EAAE,iBACT2Z,MAAO3Z,EAAE,iBACT4Z,gBAAiB5Z,EAAE,kBACnB6Z,YAAa7Z,EAAE,wBAGjBgB,KAAK8Y,YAAa,EAEL,aADb9Y,KAAKqK,KAAOA,IAEVrK,KAAK2J,KAAO,CACVoP,OAAQ,CACN,CAACC,QAAS,MAAOC,QAAS,aAAcC,WAAY,CAAC,UAAW,KAAM,QACtE,CAACF,QAAS,MAAOC,QAAS,sBAAuBC,WAAY,CAAC,UAAW,KAAM,QAC/E,CAACF,QAAS,OAAQC,QAAS,YAAaC,WAAY,CAAC,UAAW,KAAM,QACtE,CAACF,QAAS,OAAQC,QAAS,gBAAiBC,WAAY,CAAC,UAAW,KAAM,QAC1E,CAACF,QAAS,OAAQC,QAAS,YAAaC,WAAY,CAAC,KAAM,MAAO,KAAM,KAAM,MAAO,MAAO,OAC5F,CAACF,QAAS,QAASC,QAAS,UAAWC,WAAY,CAAC,UAAW,KAAM,QACrE,CAACF,QAAS,OAAQC,QAAS,iBAAkBC,WAAY,CAAC,UAAW,KAAM,QAC3E,CAACF,QAAS,OAAQC,QAAS,eAAgBC,WAAY,CAAC,KAAM,MAAO,KAAM,KAAM,MAAO,MAAO,OAC/F,CAACF,QAAS,MAAOC,QAAS,UAAWC,WAAY,CAAC,UAAW,KAAM,QACnE,CAACF,QAAS,QAASC,QAAS,WAAYC,WAAY,CAAC,UAAW,KAAM,QACtE,CAACF,QAAS,OAAQC,QAAS,QAASC,WAAY,CAAC,UAAW,KAAM,UAGtE5M,gBAAgBtM,KAAKwX,QAAQtE,OAAO,GACpC5G,gBAAgBtM,KAAKwX,QAAQoB,iBAAiB,IAC5B,SAATvO,GACTrK,KAAK2J,KAAO,CACVoP,OAAQ,CACN,CAACC,QAAS,MAAOC,QAAS,UAAWC,WAAY,CAAC,UAAW,KAAM,QACnE,CAACF,QAAS,MAAOC,QAAS,WAAYC,WAAY,CAAC,UAAW,KAAM,QACpE,CAACF,QAAS,MAAOC,QAAS,gBAAiBC,WAAY,GAAIC,aAAa,GACxE,CAACH,QAAS,KAAMC,QAAS,WAAYC,WAAY,CAAC,UAAW,KAAM,QACnE,CAACF,QAAS,OAAQC,QAAS,eAAgBC,WAAY,CAAC,UAAW,KAAM,QACzE,CAACF,QAAS,IAAKC,QAAS,MAAOC,WAAY,CAAC,KAAM,MAAO,KAAM,KAAM,MAAO,MAAO,OACnF,CAACF,QAAS,IAAKC,QAAS,QAASC,WAAY,CAAC,KAAM,MAAO,KAAM,KAAM,MAAO,MAAO,OACrF,CAACF,QAAS,IAAKC,QAAS,YAAaC,WAAY,CAAC,KAAM,MAAO,KAAM,KAAM,MAAO,MAAO,OACzF,CAACF,QAAS,KAAMC,QAAS,YAAaC,WAAY,CAAC,KAAM,QACzD,CAACF,QAAS,MAAOC,QAAS,SAAUC,WAAY,CAAC,KAAM,MAAO,KAAM,KAAM,MAAO,MAAO,OACxF,CAACF,QAAS,OAAQC,QAAS,YAAaC,WAAY,CAAC,KAAM,MAAO,KAAM,KAAM,MAAO,MAAO,OAC5F,CAACF,QAAS,MAAOC,QAAS,eAAgBC,WAAY,CAAC,KAAM,MAAO,KAAM,KAAM,MAAO,MAAO,OAC9F,CAACF,QAAS,UAAWC,QAAS,WAAYC,WAAY,CAAC,KAAM,MAAO,KAAM,KAAM,MAAO,MAAO,OAC9F,CAACF,QAAS,OAAQC,QAAS,YAAaC,WAAY,CAAC,UAAW,KAAM,QACtE,CAACF,QAAS,OAAQC,QAAS,iBAAkBC,WAAY,CAAC,UAAW,KAAM,QAC3E,CAACF,QAAS,MAAOC,QAAS,cAAeC,WAAY,CAAC,UAAW,KAAM,QACvE,CAACF,QAAS,OAAQC,QAAS,YAAaC,WAAY,CAAC,UAAW,KAAM,QACtE,CAACF,QAAS,OAAQC,QAAS,mBAAoBC,WAAY,CAAC,UAAW,KAAM,QAC7E,CAACF,QAAS,OAAQC,QAAS,cAAeC,WAAY,CAAC,KAAM,MAAO,KAAM,KAAM,MAAO,MAAO,OAC9F,CAACF,QAAS,OAAQC,QAAS,gBAAiBC,WAAY,CAAC,KAAM,MAAO,KAAM,KAAM,MAAO,MAAO,OAEhG,CAACF,QAAS,MAAOC,QAAS,UAAWC,WAAY,CAAC,UAAW,KAAM,QACnE,CAACF,QAAS,MAAOC,QAAS,UAAWC,WAAY,CAAC,UAAW,KAAM,QACnE,CAACF,QAAS,KAAMC,QAAS,SAAUC,WAAY,CAAC,KAAM,UAG1D5M,gBAAgBtM,KAAKwX,QAAQtE,OAAO,GACpC5G,gBAAgBtM,KAAKwX,QAAQoB,iBAAiB,IAC5B,iBAATvO,IACTrK,KAAK2J,KAAO,CACVoP,OAAQ,CACN,CAACC,QAAS,MAAOC,QAAS,sBAAuBC,WAAY,CAAC,UAAW,KAAM,QAC/E,CAACF,QAAS,OAAQC,QAAS,YAAaC,WAAY,CAAC,UAAW,KAAM,QACtE,CAACF,QAAS,QAASC,QAAS,UAAWC,WAAY,CAAC,UAAW,KAAM,QACrE,CAACF,QAAS,OAAQC,QAAS,YAAaC,WAAY,CAAC,KAAM,MAAO,KAAM,KAAM,MAAO,MAAO,OAC5F,CAACF,QAAS,MAAOC,QAAS,UAAWC,WAAY,CAAC,UAAW,KAAM,QACnE,CAACF,QAAS,MAAOC,QAAS,WAAYC,WAAY,CAAC,UAAW,KAAM,WAK1E,IAAIH,EAAS,GACb/Y,KAAK2J,KAAKoP,OAAO7J,QAAQ,SAAUgI,GACjC6B,EAAO7B,EAAM8B,SAAW9B,EAAM+B,UAGhCjZ,KAAK+Y,OAASA,EACd/Y,KAAKoZ,eAAY7Q,EACjBvI,KAAKsQ,OAAS,IA8ThB,SAAS+I,eAAeC,EAAK1M,GAC3B,IAAI2M,EAAMD,EAAIE,eACd,IAAKD,EAAI9R,OAIP,OAHA8R,EAAMD,EAAIG,YAAY,IAAK7M,GAC3B0M,EAAII,YAAYH,GAAK,GACrBD,EAAIK,UAAUJ,GAAK,IACZ,EAGT,IAAIhY,EAAO+X,EAAIM,SAASL,GACxB,GAAIhY,GAAQqL,EAAU,KACpB,OAAO,EAET,GAA2B,GAAvBrL,EAAK6N,QAAQ,QAAqC,GAAtB7N,EAAK6N,QAAQ,MAC3CmK,EAAMA,EAAI,GACVA,EAAMD,EAAIG,YAAYF,EAAK3M,OACtB,CAEL,KADA2M,EAAMD,EAAIO,WAAWN,IACZ9R,OACP,OAAO,EAGT,IADAlG,EAAO+X,EAAIM,SAASL,KACR3M,EAAU,KACpB,OAAO,EAET2M,EAAMD,EAAIG,YAAYF,EAAK3M,GAI7B,OAFA0M,EAAIQ,cAAa,GACjBR,EAAII,YAAYH,GAAK,IACd,EAxVThC,eAAe5Q,UAAUoT,QAAU,SAAUrP,GAC3C,IAAI0F,EAAOpQ,KACP0H,EAAM,OACV0I,EAAKoH,QAAQC,OAAOxI,QACpBjP,KAAK2J,KAAKoP,OAAO7J,QAAQ,SAAUgI,GACjC,IAAKA,EAAMiC,YAAa,CACtB,IAAIa,EAAM,mCAAmCjT,OAAOmQ,EAAM+B,QAAS/B,EAAM8B,SACzE5I,EAAKoH,QAAQC,OAAOvV,OAAO8X,GAG7BtS,GAAO,OAASwP,EAAM8B,QAAU,UAEjB,gBAAb5I,EAAK/F,OACP+F,EAAKoH,QAAQkB,MAAMzJ,QACnBmB,EAAKoH,QAAQkB,MAAMxW,OAAOwF,EAAM,SAChC0I,EAAKoH,QAAQmB,MAAM1J,SAGrBmB,EAAKoH,QAAQG,OAAO1X,SAAS,YAC7BmQ,EAAKoH,QAAQiB,IAAIxY,SAAS,YAC1BsL,WAAW6E,EAAKoH,QAAQE,YACxBtH,EAAKoH,QAAQI,YAAYvW,IAAI,IAC7B+O,EAAKoH,QAAQK,YAAYxW,IAAI,IAC7B+O,EAAKoH,QAAQM,gBAAgBzW,IAAI,IACjC+O,EAAKoH,QAAQQ,aAAa3W,IAAI,IAC9B+O,EAAKoH,QAAQS,aAAa5W,IAAI,IAC9B+O,EAAKoH,QAAQU,iBAAiB7W,IAAI,IAClC+O,EAAKoH,QAAQO,mBAAmBkC,eAAehT,4BAA4B2B,GAAG,YAAa,WACzF,IAAIsR,EAAO9J,EAAKoH,QAAQE,WAAWrW,MAC/B4L,EAAImD,EAAKoH,QAAQM,gBAAgBzW,MACjC6Y,GAAgB,MAARA,GACVhO,uBAAuBkE,EAAKoH,QAAQG,QAAS1K,KAGjDmD,EAAKoH,QAAQW,oBAAoB8B,eAAehT,4BAA4B2B,GAAG,YAAa,WAC1F,IAAIqE,EAAImD,EAAKoH,QAAQM,gBAAgBzW,MACrC6K,uBAAuBkE,EAAKoH,QAAQG,QAAS1K,KAG/CmD,EAAKoH,QAAQ1W,KAAKqZ,OAAO,CACvBC,KAAQ,CACNC,UAAa,EACbC,gBAAkB,EAClB3Q,KAAQ,CACNpI,KAAQ,WACRoU,MAAS,CACP4E,QAAU,EACVC,UAAY,OAMpBpK,EAAKoH,QAAQ1W,KAAKqZ,OAAO,WACzB/J,EAAK0I,YAAa,EAElB1I,EAAKoH,QAAQC,OAAO7O,GAAG,SAAU,WAC/B,IAAIzC,EAAQnG,KAAKmG,MACjB,GAAIA,EAAO,CACTiK,EAAKoH,QAAQI,YAAYvW,IAAI,IAC7B+O,EAAKoH,QAAQK,YAAYxW,IAAI,IAC7B+O,EAAKoH,QAAQM,gBAAgBzW,IAAI,IACjC+O,EAAKoH,QAAQQ,aAAa3W,IAAI,IAC9B+O,EAAKoH,QAAQS,aAAa5W,IAAI,IAC9B+O,EAAKoH,QAAQU,iBAAiB7W,IAAI,IAClC+O,EAAKoH,QAAQI,YAAYpM,KAAK,YAAY,GAC1C4E,EAAKoH,QAAQQ,aAAaxM,KAAK,YAAY,GAC3C4E,EAAKoH,QAAQY,aAAa7L,OAE1B6D,EAAKoH,QAAQG,OAAO1X,SAAS,YAC7BmQ,EAAKoH,QAAQE,WAAWzI,QACxB,IAAK,IAAI3I,EAAI,EAAGA,EAAI8J,EAAKzG,KAAKoP,OAAOtR,SAAUnB,EAAG,CAChD,IAAI4Q,EAAQ9G,EAAKzG,KAAKoP,OAAOzS,GAC7B,GAAI4Q,EAAM+B,SAAW9S,EAAO,CAC1B+Q,EAAMgC,WAAWhK,QAAQ,SAAUuL,GACjC,IAAIT,EAAM,mCAAmCjT,OAAO0T,EAAWnD,eAAemD,IAC9ErK,EAAKoH,QAAQE,WAAWxV,OAAO8X,KAGJ,GAAzB7T,EAAMiJ,QAAQ,SAChB9C,gBAAgB8D,EAAKoH,QAAQO,oBAAoB,GACjDzL,gBAAgB8D,EAAKoH,QAAQI,aAAa,GAC1CtL,gBAAgB8D,EAAKoH,QAAQK,aAAa,IACxB,UAAT1R,GAA8B,aAATA,GAC9BmG,gBAAgB8D,EAAKoH,QAAQK,aAAa,GAC1CvL,gBAAgB8D,EAAKoH,QAAQI,aAAa,GAC1CtL,gBAAgB8D,EAAKoH,QAAQO,oBAAoB,GACjD3H,EAAKoH,QAAQK,YAAY5I,QACZ,UAAT9I,GACFiK,EAAKoH,QAAQK,YAAY3V,OAAO,uBAChCkO,EAAKoH,QAAQK,YAAY3V,OAAO,wBAChCkO,EAAKoH,QAAQK,YAAY3V,OAAO,0BAEhCkO,EAAKoH,QAAQK,YAAY3V,OAAO,uBAChCkO,EAAKoH,QAAQK,YAAY3V,OAAO,wBAElCqJ,WAAW6E,EAAKoH,QAAQK,eAExBvL,gBAAgB8D,EAAKoH,QAAQI,aAAa,GAC1CtL,gBAAgB8D,EAAKoH,QAAQO,oBAAoB,GACjDzL,gBAAgB8D,EAAKoH,QAAQK,aAAa,IAE5C,OAGJtM,WAAW6E,EAAKoH,QAAQE,eAI5BtH,EAAKoH,QAAQE,WAAW9O,GAAG,SAAU,WACnC,IAAIsR,EAAOla,KAAKmG,MAChBiK,EAAKoH,QAAQI,YAAYpM,KAAK,YAAa0O,GAC3C9J,EAAKoH,QAAQK,YAAYrM,KAAK,YAAa0O,GAC3C9J,EAAKoH,QAAQM,gBAAgBtM,KAAK,YAAa0O,GAC/C9J,EAAKoH,QAAQQ,aAAaxM,KAAK,YAAa0O,GAC5C9J,EAAKoH,QAAQS,aAAazM,KAAK,YAAa0O,GAC5C9J,EAAKoH,QAAQU,iBAAiB1M,KAAK,YAAa0O,GAEhD,IAAIQ,EAAYtK,EAAKoH,QAAQC,OAAOpW,MACxB,MAAR6Y,GACF5N,gBAAgB8D,EAAKoH,QAAQY,cAAc,GACV,GAA7BsC,EAAUtL,QAAQ,SACpB9C,gBAAgB8D,EAAKoH,QAAQW,qBAAqB,GAClD7L,gBAAgB8D,EAAKoH,QAAQQ,cAAc,KAE3C1L,gBAAgB8D,EAAKoH,QAAQW,qBAAqB,GAClD7L,gBAAgB8D,EAAKoH,QAAQQ,cAAc,MAG7C1L,gBAAgB8D,EAAKoH,QAAQY,cAAc,GAC3C9L,gBAAgB8D,EAAKoH,QAAQW,qBAAqB,GAClD7L,gBAAgB8D,EAAKoH,QAAQQ,cAAc,MAI/C5H,EAAKoH,QAAQI,YAAYhP,GAAG,cAAe,SAAUlJ,GACnDA,EAAEib,2BACF,IAAIT,EAAO9J,EAAKoH,QAAQE,WAAWrW,MAC/B6Y,GAAgB,MAARA,GACVhO,uBAAuBkE,EAAKoH,QAAQG,QAAS3X,KAAKmG,SAGtDiK,EAAKoH,QAAQK,YAAYjP,GAAG,SAAU,SAAUlJ,GAC9CA,EAAEib,2BACF,IAAIT,EAAO9J,EAAKoH,QAAQE,WAAWrW,MAC/B6Y,GAAgB,MAARA,GACVhO,uBAAuBkE,EAAKoH,QAAQG,QAAS3X,KAAKmG,SAGtDiK,EAAKoH,QAAQQ,aAAapP,GAAG,cAAe,SAAUlJ,GACpDA,EAAEib,2BACFzO,uBAAuBkE,EAAKoH,QAAQG,QAAS3X,KAAKmG,SAGpDiK,EAAKoH,QAAQG,OAAO/O,GAAG,QAAS,WAC9B,IAAIsO,EAAQ9G,EAAKoH,QAAQC,OAAOlX,KAAK,mBAAmBgB,OACpD2Y,EAAO9J,EAAKoH,QAAQE,WAAWnX,KAAK,mBAAmBgB,OACvD4E,EAAQiK,EAAKoH,QAAQI,YAAYvW,MACjCuZ,GAAS,EAKb,GAJ2B,GAAvB1D,EAAM9H,QAAQ,QAChBjJ,EAAQiK,EAAKoH,QAAQM,gBAAgBzW,MACrCuZ,GAAS,GAEC,MAARV,EAAc,CAChB,IAAIW,EAAKzK,EAAKoH,QAAQQ,aAAa3W,MAC/BuZ,IACFC,EAAKzK,EAAKoH,QAAQU,iBAAiB7W,OAErC+O,EAAK0K,WAAW,CAACvZ,KAAQ2V,EAAQ,IAAMgD,EAAO,IAAM/T,EAAQ,IAAM0U,QAErD,MAAT3D,GAA0B,MAATA,IACnB/Q,EAAQiK,EAAKoH,QAAQK,YAAYxW,OAEnC+O,EAAK0K,WAAW,CAACvZ,KAAQ2V,EAAQ,IAAMgD,EAAO,IAAM/T,MAIxDiK,EAAKoH,QAAQa,KAAKzP,GAAG,QAAS,WAC5BwH,EAAK0K,WAAW,CAACvZ,KAAQ,eAG3B6O,EAAKoH,QAAQc,IAAI1P,GAAG,QAAS,WAC3BwH,EAAK0K,WAAW,CAACvZ,KAAQ,cAG3B6O,EAAKoH,QAAQe,QAAQ3P,GAAG,QAAS,WAC/B,IAAI0Q,EAAMlJ,EAAKoH,QAAQ1W,KAAKqZ,QAAO,GACnC,GAAIb,EAAK,CACP,IAAIC,EAAMD,EAAIE,eACd,IAAKD,EAAI9R,OACP,OAAO,EAET,IAAI3E,EAASwW,EAAIO,WAAWN,GACxBzW,GAAoB,KAAVA,IACZwW,EAAIyB,YAAYxB,GAChBD,EAAII,YAAY5W,GAAQ,OAK9BsN,EAAKoH,QAAQgB,MAAM5P,GAAG,QAAS,WAC7B,IAAIwH,EAAK0I,WAAT,CAIA,IACIkC,EADM5K,EAAKoH,QAAQ1W,KAAKqZ,QAAO,GACpBc,SAAS,KACxB7K,EAAK0I,YAAa,EAClB9Z,EAAEkc,IAAIxQ,EAAO,CAACZ,EAAGQ,KAAKC,UAAUyQ,EAAK,IAAKG,gBAAgB,EAAMjE,MAAO9G,EAAK2I,QAAS,SAAUpP,GAC7F,IAAI2G,EAAShG,KAAK8Q,MAAMzR,GACxBrH,QAAQC,IAAI+N,EAAOtF,IACfsF,EAAOtF,IACToF,EAAKE,OAASA,EACdF,EAAKgJ,WAAa,EAClBhJ,EAAKiL,kBAEe,IAAhB/K,EAAO9I,QACTyD,QAAQC,MAAM,YAAcoF,EAAO9I,OAAS,6BAG9CyD,QAAQC,MAAM,UAGhBkF,EAAK0I,YAAa,QAKxBvB,eAAe5Q,UAAU2U,eAAiB,SAAUtQ,GAClD,IAAIoF,EAAOpQ,KACXA,KAAKwX,QAAQiB,IAAI7P,GAAG,QAAS,WACV,WAAbwH,EAAK/F,KACH9B,MAAa6H,EAAKgJ,WAA+B,GAAlBhJ,EAAKgJ,WACtCpO,EAAGoF,EAAKE,OAAQF,EAAKgJ,WAGvBpO,EAAGoF,EAAKE,WAKdiH,eAAe5Q,UAAU0U,gBAAkB,WACzC,IAAIjL,EAAOpQ,KAGX,GADAoQ,EAAKoH,QAAQmB,MAAM1J,QACF,WAAbmB,EAAK/F,KAAmB,CAE1BrL,EAAE4B,KAAKwP,EAAKE,OAAO2F,SAAU,SAAUhK,EAAOiK,GAC5C,IAAIP,EAAQ,8CACM,QAAdO,EAAIP,MACNA,EAAQ,+CACe,QAAdO,EAAIP,QACbA,EAAQ,6CAEV,IAAI4F,EARI,iJAQexU,OAAOmP,EAAIsF,WAChCtF,EAAIuF,oBAAsBvF,EAAIuF,oBAAsB,GACpDvF,EAAIwF,UAAYxF,EAAIwF,UAAY,GAChCxF,EAAIyF,cAAgBzF,EAAIyF,cAAgB,GACxCzF,EAAI0F,UAAYrV,SAAS2P,EAAI0F,WAAa,GAC1C1F,EAAI2F,QAAU3F,EAAI2F,QAAU,GAC5B3F,EAAIjB,eAAiBiB,EAAIjB,eAAiB,GAC1CxH,YAAYyI,EAAIlB,cAChBkB,EAAIZ,QAAUY,EAAIZ,QAAU,GAC5BY,EAAI4F,SAAW5F,EAAI4F,SAAW,GAC9BnG,GACFvF,EAAKoH,QAAQmB,MAAMzW,OAAOqZ,KAG5B3P,SAASwE,EAAKoH,QAAQmB,MAAMpY,KAAK,MAAO,SAAUb,EAAGuM,GACtC,GAATA,IACFmE,EAAKoH,QAAQiB,IAAI3Y,YAAY,YAC7BsQ,EAAKgJ,UAAYnN,UA4BjBmE,EAAKE,OAAOyD,MAAMtM,QACpByE,uBAAuBkE,EAAKoH,QAAQiB,KAAK,GACzCrI,EAAKoH,QAAQqB,YAAYtX,KAAK,aAAe6O,EAAKE,OAAOyD,MAAMtM,UAE/DyE,uBAAuBkE,EAAKoH,QAAQiB,KAAK,GACzCrI,EAAKoH,QAAQqB,YAAYtX,KAAK,sBAKpCgW,eAAe5Q,UAAUmU,WAAa,SAAUlO,GAC9C,IAAI0M,EAAMtZ,KAAKwX,QAAQ1W,KAAKqZ,QAAO,GACnC,IAAKb,EAAK,OAAO,EACjBD,eAAeC,EAAK1M,IAoCtB,IAAImP,eAAiB,SAAUC,EAAUC,EAAaC,EAAWC,EAAiBC,GAChFpc,KAAKyI,KAAOuT,EACZhc,KAAK0B,QAAUua,EAAYnK,QAC3B9R,KAAKqc,eAAiBJ,EAAYnK,QAClC9R,KAAKwa,SAAW,GAEhB3L,WAAW7O,KAAKyI,KAAMzI,KAAK0B,SAAS,GAEpC,IAAI0O,EAAOpQ,KACPsc,EAAS,CACXC,YAAa,OACbC,UAAW,IACXN,UAAWA,EACXO,iBAAiB,EACjBC,kBAAmB,KAEnBC,WAAY,SAAUjb,EAASkb,GAC7B,GAAuB,IAAnBlb,EAAQ+F,OACV,MAAO,SACF,GAAqB,EAAjB/F,EAAQ+F,OACjB,MAAO,MAAQ/F,EAAQ+F,OAAS,IAEhC,IAAIoV,EAAS,GAQb,OAPAnb,EAAQd,KAAK,gBACmB2H,IAA1BvJ,EAAEgB,MAAM8c,KAAK,SACfD,EAAO9K,KAAK/S,EAAEgB,MAAM8c,KAAK,UAEzBD,EAAO9K,KAAK/S,EAAEgB,MAAMyP,UAGjBoN,EAAOtH,KAAK,OAIvBwH,SAAU,SAAUT,EAAQU,GAC1B,IAAI/P,EAAI,mBAKR,GAJIqP,IACFrP,EAAIqP,EAAOjb,QAGG,IAAZ2b,EACQ,qBAAN/P,EACFmD,EAAKoK,SAAWpK,EAAKiM,eAAevK,QAEhC1B,EAAKoK,SAASpL,QAAQnC,GAAK,GAC7BmD,EAAKoK,SAASzI,KAAK9E,QAGlB,IAAgB,IAAZ+P,EACT,GAAU,qBAAN/P,EACFmD,EAAKoK,SAAW,QAEhB,IAAK,IAAIlU,EAAI8J,EAAKoK,SAAS/S,OAAS,EAAQ,GAALnB,IAAUA,EAC/C,GAAI8J,EAAKoK,SAASlU,KAAO2G,EAAG,CAC1BmD,EAAKoK,SAASnY,OAAOiE,GACrB,MAMJ8V,GACFA,EAAKhM,EAAKoK,YAKZ2B,IACFG,EAAOW,wBAAyB,EAChCX,EAAOY,cAAgB,OACvBZ,EAAOa,eAAiB,oBAG1Bnd,KAAKyI,KAAK2U,YAAYd,IAGxBP,eAAepV,UAAU0W,QAAU,SAAUhB,EAAgBiB,GAC3Dtd,KAAKqc,eAAiBA,EAAevK,QACrCjD,WAAW7O,KAAKyI,KAAM4T,GAAgB,GACtCrc,KAAKyI,KAAK2U,YAAY,WAClBE,GACFtd,KAAKyI,KAAK2U,YAAY,SAAUE,IAIpCvB,eAAepV,UAAU4W,UAAY,WACnCvd,KAAKyI,KAAK2U,YAAY,aAAa,GACnCpd,KAAKyI,KAAK2U,YAAY,qBAGxBrB,eAAepV,UAAU6W,WAAa,WACpC,OAAgC,IAAzBxd,KAAKwa,SAAS/S,QAGvBsU,eAAepV,UAAU8W,oBAAsB,SAAUpB,GACvD,IAAIjM,EAAOpQ,KACXoQ,EAAKiM,eAAiBA,EAAevK,MAAM,GAC3CjD,WAAWuB,EAAK3H,KAAM4T,GAAgB,GACtCjM,EAAK3H,KAAK2U,YAAY,WACtBhN,EAAK3H,KAAK2U,YAAY,aAAa,GACnChN,EAAK3H,KAAK2U,YAAY,oBACtBhN,EAAKoK,SAAW6B,EAAevK,MAAM,IAGvCiK,eAAepV,UAAUwF,SAAW,SAAUuR,GACxCA,EACF1d,KAAKyI,KAAK2U,YAAY,WAEtBpd,KAAKyI,KAAK2U,YAAY","file":"main.js","sourcesContent":["/*!\n * Author: Abdullah A Almsaeed\n * Date: 4 Jan 2014\n * Description:\n *      This file should be included in all pages\n !**/\n\n/*\n * Global variables. If you change any of these vars, don't forget \n * to change the values in the less files!\n */\nvar left_side_width = 180; //Sidebar width in pixels\n\n$(function () {\n  \"use strict\";\n\n  //Enable sidebar toggle\n  $(\"[data-toggle='offcanvas']\").click(function (e) {\n    e.preventDefault();\n\n    //If window is small enough, enable sidebar push menu\n    if ($(window).width() <= 992) {\n      $('.row-offcanvas').toggleClass('active');\n      $('.left-side').removeClass(\"collapse-left\");\n      $(\".right-side\").removeClass(\"strech\");\n      $('.row-offcanvas').toggleClass(\"relative\");\n    } else {\n      //Else, enable content streching\n      $('.left-side').toggleClass(\"collapse-left\");\n      $(\".right-side\").toggleClass(\"strech\");\n    }\n  });\n\n  //Add hover support for touch devices\n  $('.btn').bind('touchstart', function () {\n    $(this).addClass('hover');\n  }).bind('touchend', function () {\n    $(this).removeClass('hover');\n  });\n\n  //Activate tooltips\n  $(\"[data-toggle='tooltip']\").tooltip();\n\n  /*\n   * Add collapse and remove events to boxes\n   */\n  $(\"[data-widget='collapse']\").click(function () {\n    //Find the box parent\n    var box = $(this).parents(\".box\").first();\n    //Find the body and the footer\n    var bf = box.find(\".box-body, .box-footer\");\n    if (!box.hasClass(\"collapsed-box\")) {\n      box.addClass(\"collapsed-box\");\n      bf.slideUp();\n    } else {\n      box.removeClass(\"collapsed-box\");\n      bf.slideDown();\n    }\n  });\n\n  /*\n   * ADD SLIMSCROLL TO THE TOP NAV DROPDOWNS\n   * ---------------------------------------\n   */\n  $(\".navbar .menu\").slimscroll({\n    height: \"200px\",\n    alwaysVisible: false,\n    size: \"3px\"\n  }).css(\"width\", \"100%\");\n\n  /*\n   * INITIALIZE BUTTON TOGGLE\n   * ------------------------\n   */\n  $('.btn-group[data-toggle=\"btn-toggle\"]').each(function () {\n    var group = $(this);\n    $(this).find(\".btn\").click(function (e) {\n      group.find(\".btn.active\").removeClass(\"active\");\n      $(this).addClass(\"active\");\n      e.preventDefault();\n    });\n\n  });\n\n  $(\"[data-widget='remove']\").click(function () {\n    //Find the box parent\n    var box = $(this).parents(\".box\").first();\n    box.slideUp();\n  });\n\n  /* Sidebar tree view */\n  $(\".sidebar .treeview\").tree();\n\n  /*\n   * Make sure that the sidebar is streched full height\n   * ---------------------------------------------\n   * We are gonna assign a min-height value every time the\n   * wrapper gets resized and upon page load. We will use\n   * Ben Alman's method for detecting the resize event.\n   *\n   **/\n  function _fix() {\n    //Get window height and the wrapper height\n    var height = $(window).height() - $(\"body > .header\").height() - $(\"body > .footer\").height();\n    $(\".wrapper\").css(\"min-height\", height + \"px\");\n    var content = $(\".wrapper\").height();\n    //If the wrapper height is greater than the window\n    if (content > height)\n    //then set sidebar height to the wrapper\n      $(\".left-side, html, body\").css(\"min-height\", content + \"px\");\n    else {\n      //Otherwise, set the sidebar to the height of the window\n      $(\".left-side, html, body\").css(\"min-height\", height + \"px\");\n    }\n  }\n\n  //Fire upon load\n  _fix();\n  //Fire when wrapper is resized\n  $(\".wrapper\").resize(function () {\n    _fix();\n    fix_sidebar();\n  });\n\n  //Fix the fixed layout sidebar scroll bug\n  fix_sidebar();\n\n  /*\n   * We are gonna initialize all checkbox and radio inputs to\n   * iCheck plugin in.\n   * You can find the documentation at http://fronteed.com/iCheck/\n   */\n  $(\"input[type='checkbox'], input[type='radio']\").iCheck({\n    checkboxClass: 'icheckbox_minimal',\n    radioClass: 'iradio_minimal'\n  });\n\n  $(\"#openExeclfile\").change(function () {\n    var file = $(this).val().replace(/C:\\\\fakepath\\\\/ig, '');\n    $(\"#fileName\").text(file);\n    $(\"#filepath\").text($(this).val());\n\n  });\n});\n\nfunction fix_sidebar() {\n  //Make sure the body tag has the .fixed class\n  if (!$(\"body\").hasClass(\"fixed\")) {\n    return;\n  }\n\n  //Add slimscroll\n  $(\".sidebar\").slimscroll({\n    height: ($(window).height() - $(\".header\").height()) + \"px\",\n    color: \"rgba(0,0,0,0.2)\"\n  });\n}\n\n/*END DEMO*/\n\n/*\n * BOX REFRESH BUTTON \n * ------------------\n * This is a custom plugin to use with the compenet BOX. It allows you to add\n * a refresh button to the box. It converts the box's state to a loading state.\n * \n * USAGE:\n *  $(\"#box-widget\").boxRefresh( options );\n * */\n(function ($) {\n  \"use strict\";\n\n  $.fn.boxRefresh = function (options) {\n\n    // Render options\n    var settings = $.extend({\n      //Refressh button selector\n      trigger: \".refresh-btn\",\n      //File source to be loaded (e.g: ajax/src.php)\n      source: \"\",\n      //Callbacks\n      onLoadStart: function (box) {\n      }, //Right after the button has been clicked\n      onLoadDone: function (box) {\n      } //When the source has been loaded\n\n    }, options);\n\n    //The overlay\n    var overlay = $('<div class=\"overlay\"></div><div class=\"loading-img\"></div>');\n\n    return this.each(function () {\n      //if a source is specified\n      if (settings.source === \"\") {\n        if (console) {\n          console.log(\"Please specify a source first - boxRefresh()\");\n        }\n        return;\n      }\n      //the box\n      var box = $(this);\n      //the button\n      var rBtn = box.find(settings.trigger).first();\n\n      //On trigger click\n      rBtn.click(function (e) {\n        e.preventDefault();\n        //Add loading overlay\n        start(box);\n\n        //Perform ajax call\n        box.find(\".box-body\").load(settings.source, function () {\n          done(box);\n        });\n      });\n\n    });\n\n    function start(box) {\n      //Add overlay and loading img\n      box.append(overlay);\n\n      settings.onLoadStart.call(box);\n    }\n\n    function done(box) {\n      //Remove overlay and loading img\n      box.find(overlay).remove();\n\n      settings.onLoadDone.call(box);\n    }\n  };\n})(jQuery);\n\n/*\n * SIDEBAR MENU\n * ------------\n * This is a custom plugin for the sidebar menu. It provides a tree view.\n * \n * Usage:\n * $(\".sidebar).tree();\n * \n * Note: This plugin does not accept any options. Instead, it only requires a class\n *       added to the element that contains a sub-menu.\n *       \n * When used with the sidebar, for example, it would look something like this:\n * <ul class='sidebar-menu'>\n *      <li class=\"treeview active\">\n *          <a href=\"#>Menu</a>\n *          <ul class='treeview-menu'>\n *              <li class='active'><a href=#>Level 1</a></li>\n *          </ul>\n *      </li>\n * </ul>\n * \n * Add .active class to <li> elements if you want the menu to be open automatically\n * on page load. See above for an example.\n */\n(function ($) {\n  \"use strict\";\n\n  $.fn.tree = function () {\n\n    return this.each(function () {\n      var btn = $(this).children(\"a\").first();\n      var menu = $(this).children(\".treeview-menu\").first();\n      var isActive = $(this).hasClass('active');\n\n      //initialize already active menus\n      if (isActive) {\n        menu.show();\n        btn.children(\".fa-angle-left\").first().removeClass(\"fa-angle-left\").addClass(\"fa-angle-down\");\n      }\n      //Slide open or close the menu on link click\n      btn.click(function (e) {\n        e.preventDefault();\n        if (isActive) {\n          //Slide up to close menu\n          menu.slideUp();\n          isActive = false;\n          btn.children(\".fa-angle-down\").first().removeClass(\"fa-angle-down\").addClass(\"fa-angle-left\");\n          btn.parent(\"li\").removeClass(\"active\");\n        } else {\n          //Slide down to open menu\n          menu.slideDown();\n          isActive = true;\n          btn.children(\".fa-angle-left\").first().removeClass(\"fa-angle-left\").addClass(\"fa-angle-down\");\n          btn.parent(\"li\").addClass(\"active\");\n        }\n      });\n\n      /* Add margins to submenu elements to give it a tree look */\n      menu.find(\"li > a\").each(function () {\n        var pad = parseInt($(this).css(\"margin-left\")) + 10;\n\n        $(this).css({\"margin-left\": pad + \"px\"});\n      });\n\n    });\n  };\n\n}(jQuery));\n\n/* CENTER ELEMENTS */\n(function ($) {\n  \"use strict\";\n  jQuery.fn.center = function (parent) {\n    if (parent) {\n      parent = this.parent();\n    } else {\n      parent = window;\n    }\n    this.css({\n      \"position\": \"absolute\",\n      \"top\": ((($(parent).height() - this.outerHeight()) / 2) + $(parent).scrollTop() + \"px\"),\n      \"left\": ((($(parent).width() - this.outerWidth()) / 2) + $(parent).scrollLeft() + \"px\")\n    });\n    return this;\n  }\n}(jQuery));\n\nvar datatable_tabletools = {\n  \"sSwfPath\": \"js/plugins/datatables/TableTools/swf/copy_csv_xls_pdf.swf\",\n  \"aButtons\": [\n    {\n      \"sExtends\": \"copy\",\n      \"sButtonText\": \"拷贝\"\n    },\n    {\n      \"sExtends\": \"csv\",\n      \"sButtonText\": \"保存Excel/csv\"\n    }\n  ]\n};\nvar lang = {\n  \"sProcessing\": \"处理中...\",\n  \"sLengthMenu\": \"显示 _MENU_ 项结果\",\n  \"sZeroRecords\": \"没有匹配结果\",\n  \"sInfo\": \"显示第 _START_ 至 _END_ 项结果，共 _TOTAL_ 项\",\n  \"sInfoEmpty\": \"显示第 0 至 0 项结果，共 0 项\",\n  \"sInfoFiltered\": \"(由 _MAX_ 项结果过滤)\",\n  \"sInfoPostFix\": \"\",\n  \"sSearch\": \"搜索:\",\n  \"sUrl\": \"\",\n  \"sEmptyTable\": \"表中数据为空\",\n  \"sLoadingRecords\": \"载入中...\",\n  \"sInfoThousands\": \",\",\n  \"oPaginate\": {\n    \"sFirst\": \"首页\",\n    \"sPrevious\": \"上页\",\n    \"sNext\": \"下页\",\n    \"sLast\": \"末页\"\n  },\n  \"oAria\": {\n    \"sSortAscending\": \": 以升序排列此列\",\n    \"sSortDescending\": \": 以降序排列此列\"\n  }\n};\n\nfunction getDataTableParams(withTools, xInner) {\n  var dataTableParams = {\n    \"aaSorting\": [[0, 'asc']],\n    \"iDisplayLength\": 10,\n    \"aLengthMenu\": [[10, 20, 50, 100, -1], [10, 20, 50, 100, \"All\"]],\n    \"sPaginationType\": \"full_numbers\",\n    \"sScrollX\": \"100%\",\n    \"sScrollXInner\": xInner,\n    \"language\": lang,\n    \"sDom\": 'T<\"clear\">lfrtip'\n  };\n\n  if (withTools) {\n    dataTableParams.oTableTools = datatable_tabletools;\n  }\n\n  return dataTableParams;\n}\n\n$(function () {\n  $('.input-group.date').find('input').each(function () {\n    this.value = '';\n  });\n\n  $('input:radio').iCheck({\n    checkboxClass: 'icheckbox_square-green',\n    radioClass: 'iradio_square-green',\n    increaseArea: '20%' // optional\n  });\n  $('input:checkbox').iCheck({\n    checkboxClass: 'icheckbox_square-green',\n    radioClass: 'iradio_square-green',\n    increaseArea: '20%' // optional\n  });\n\n  var show_search_data = $(\"#show_search_data\");\n  if (show_search_data.length > 0) {\n    show_search_data.dataTable(getDataTableParams(true, \"150%\"));\n  }\n\n  $('[data-toggle=\"tooltip\"]').tooltip({trigger: \"hover\", html: true});\n  $('[data-toggle=\"popover\"]').popover({trigger: 'hover', html: true});\n\n  // render\n  var blogs = $('#blog-content');\n  if (blogs.length > 0) {\n    blogs.html(local_html_data);\n    var objEditor = CKEDITOR.replace('editor1', {\n      toolbar: [\n        {\n          name: 'clipboard',\n          groups: ['clipboard', 'undo'],\n          items: ['Cut', 'Copy', 'Paste', 'PasteText', 'PasteFromWord', '-', 'Undo', 'Redo']\n        },\n        {\n          name: 'basicstyles',\n          groups: ['basicstyles', 'cleanup'],\n          items: ['Bold', 'Italic', 'Underline', 'Strike', 'Subscript', 'Superscript', '-', 'RemoveFormat']\n        },\n        {\n          name: 'paragraph',\n          groups: ['list', 'indent', 'blocks', 'align', 'bidi'],\n          items: ['NumberedList', 'BulletedList', '-', 'Outdent', 'Indent', '-', 'Blockquote', '-', 'JustifyLeft', 'JustifyCenter', 'JustifyRight', 'JustifyBlock', '-', 'BidiLtr', 'BidiRtl', 'Language']\n        },\n        {name: 'links', items: ['Link', 'Unlink']},\n        {name: 'insert', items: ['Image', 'Table', 'HorizontalRule', 'Smiley', 'SpecialChar', 'PageBreak']},\n        {name: 'styles', items: ['Styles', 'Format', 'Font', 'FontSize']},\n        {name: 'colors', items: ['TextColor', 'BGColor']},\n        {name: 'tools', items: ['Maximize', 'ShowBlocks']}\n      ]\n    });\n\n    var btnSubmit = $('#post-submit');\n\n    $('#post-edit').on('click', function () {\n      $('.post-remove').hide();\n      showHtmlElement($('#editor-box'), true);\n      setHtmlElementDisabled(btnSubmit, false);\n    });\n\n    btnSubmit.on('click', function () {\n      var title = $('#post-title').val();\n      if (title.length === 0) {\n        bootbox.alert('请输入发布的标题!');\n        return;\n      }\n      var html = objEditor.document.getBody().getHtml();\n      if (html.length === 0) {\n        bootbox.alert('没有内容可以发布,请输入!');\n        return;\n      }\n\n      var content = '<div class=\"blog-post\"><button class=\"btn btn-danger btn-sm pull-right post-remove\" style=\"display:none;\"><i class=\"fa fa-times\"></i></button><h2 class=\"blog-post-title\">' + title + '</h2><p class=\"blog-post-meta\">作者:<a href=\"\">' + local_user.userid + '</a> 日期:' + new Date().yyyymmdd_cn() + '</p>' + html + '</div>';\n      ajaxRequestHandle('/post_submit', 'POST', {html: content}, '发布', function () {\n        blogs.prepend(content);\n        $('.post-remove').hide();\n        showHtmlElement($('#editor-box'), false);\n        $('.post-remove').on('click', function () {\n          removePost($(this).parent());\n        });\n\n        setHtmlElementDisabled(btnSubmit, true);\n      });\n    });\n\n    $('#post-delete').on('click', function () {\n      $('.post-remove').toggle();\n    });\n\n    $('.post-remove').on('click', function () {\n      removePost($(this).parent());\n    });\n\n    function removePost(self) {\n      bootbox.confirm('您确定要删除? 删除后不能恢复!', function (result) {\n        if (result) {\n          self.remove();\n          $('.post-remove').hide();\n          ajaxRequestHandle('/post_update', 'POST', {html: blogs.html()}, '删除');\n          $('.post-remove').show();\n        }\n      });\n    }\n  }\n});\n\nfunction parseFloatHTML(value) {\n  return parseFloat(value.replace(/[^\\d\\.\\-]+/g, '')) || 0;\n}\n\nfunction addZero(i) {\n  if (i < 10) {\n    i = \"0\" + i;\n  }\n  return i;\n}\n\nDate.prototype.yyyymmdd_cn = function (noMinute) {\n  var yyyy = this.getFullYear().toString();\n  var mm = (this.getMonth() + 1).toString(); // getMonth() is zero-based\n  var dd = this.getDate().toString();\n  if (noMinute) {\n    return yyyy + '-' + (mm.length === 2 ? mm : '0' + mm[0]) + '-' + (dd.length === 2 ? dd : '0' + dd[0]);\n  } else {\n    var m = addZero(this.getMinutes());\n    var h = addZero(this.getHours());\n    return yyyy + '-' + (mm.length === 2 ? mm : '0' + mm[0]) + '-' + (dd.length === 2 ? dd : '0' + dd[0]) + ' ' + h + \":\" + m;\n  }\n};\n\nfunction date2Str(date, noMinute) {\n  if (date) {\n    if (Object.prototype.toString.call(date) === '[object Date]' || typeof date === 'string') {\n      var m = moment(date);\n      if (noMinute) {\n        return m.format('YYYY-MM-DD');\n      } else {\n        return m.format('YYYY-MM-DD HH:mm');\n      }\n    }\n    else if (moment.isMoment(date)) {\n      if (noMinute) {\n        return date.format('YYYY-MM-DD');\n      } else {\n        return date.format('YYYY-MM-DD HH:mm');\n      }\n    }\n    else {\n      var m = moment(date);\n      if (noMinute) {\n        return m.format('YYYY-MM-DD');\n      } else {\n        return m.format('YYYY-MM-DD HH:mm');\n      }\n    }\n  } else {\n    return '';\n  }\n}\n\nfunction getDateTimePickerOptions() {\n  return {\n    autoclose: true,\n    useCurrent: false,\n    todayBtn: true,\n    language: 'zh-cn',\n    collapse: false,\n    pickTime: false\n  }\n}\n\n// Array Remove - By John Resig (MIT Licensed)\nArray.prototype.remove = function (from, to) {\n  var rest = this.slice((to || from) + 1 || this.length);\n  this.length = from < 0 ? this.length + from : from;\n  return this.push.apply(this, rest);\n};\n\nif (!String.prototype.format) {\n  String.prototype.format = function () {\n    var args = arguments;\n    return this.replace(/{(\\d+)}/g, function (match, number) {\n      return typeof args[number] != 'undefined' ? args[number] : match;\n    });\n  };\n}\n\njQuery.fn.ForceNumericOnly = function () {\n  return this.each(function () {\n    $(this).keydown(function (e) {\n      var key = e.charCode || e.keyCode || 0;\n      // allow backspace, tab, delete, enter, arrows, numbers and keypad numbers ONLY\n      // home, end, period, and numpad decimal\n      return (\n      key == 8 ||   // delete\n      key == 9 ||   // tab\n      key == 13 ||  // enter\n      key == 46 ||  // backspace\n      key == 110 || // .\n      key == 190 ||\n      (key >= 35 && key <= 40) ||   // home, end, left, right\n      (key >= 48 && key <= 57) ||   // Ensure that it is a number and stop the keypress\n      (key >= 96 && key <= 105));\n    });\n  });\n};\n\n////////////////////////////////////////////////////////////////////////////////////\n/////////// Help Function and Class\n////////////////////////////////////////////////////////////////////////////////////\nfunction leftPad(number, length) {\n  var str = '' + number;\n  while (str.length < length) {\n    str = '0' + str;\n  }\n\n  return str;\n}\n\nfunction getOrder(order_no, item_no) {\n  return order_no + '-' + leftPad(item_no, 3);\n}\n\nfunction sort_pinyin(arr) {\n  return arr.sort(function (a, b) {\n    return a.localeCompare(b);//, [ \"zh-CN-u-co-pinyin\" ]);\n  });\n}\n\nfunction isEmpty(variable) {\n  return (typeof variable === 'undefined' || !variable || 0 === variable.length);\n}\n\nfunction isExist(variable) {\n  return ((typeof variable != 'undefined') && undefined != variable);\n}\n\nfunction elementEventRegister(elem, event_name, event_handler) {\n  if (elem.length) {\n    elem.on(event_name, event_handler);\n  }\n}\n\nvar nlApp;\nnlApp = nlApp || (function () {\n  var pleaseWaitDiv = $('<div class=\"modal fade\" id=\"pleaseWaitDiv\" role=\"dialog\" style=\"display:none\"><div class=\"modal-dialog\" data-backdrop=\"static\" data-keyboard=\"false\"><div class=\"modal-content\"><div class=\"modal-header\"><h4 class=\"modal-title\"><i class=\"fa fa-clock-o\"></i>处理中...</h4></div><div class=\"modal-body center-block\"><div class=\"progress progress-striped active\"><div class=\"progress-bar\" role=\"progressbar\" aria-valuenow=\"100\" aria-valuemin=\"0\" aria-valuemax=\"100\" style=\"width: 100%;\"></div></div></div></div></div>');\n  return {\n    showPleaseWait: function () {\n      $('body').css({'cursor': 'wait'});\n      pleaseWaitDiv.modal({backdrop: 'static', keyboard: false}).modal('show');\n    },\n    hidePleaseWait: function () {\n      $('body').css({'cursor': 'default'});\n      pleaseWaitDiv.modal('hide');\n    },\n    setTitle: function (title) {\n      pleaseWaitDiv = $('<div class=\"modal fade\" id=\"pleaseWaitDiv\" role=\"dialog\" style=\"display:none\"><div class=\"modal-dialog\" data-backdrop=\"static\" data-keyboard=\"false\"><div class=\"modal-content\"><div class=\"modal-header\"><h4 class=\"modal-title\"><i class=\"fa fa-clock-o\"></i>' + title + '</h4></div><div class=\"modal-body center-block\"><div class=\"progress progress-striped active\"><div class=\"progress-bar\" role=\"progressbar\" aria-valuenow=\"100\" aria-valuemin=\"0\" aria-valuemax=\"100\" style=\"width: 100%;\"></div></div></div></div></div>');\n//      pleaseWaitDiv = $('<div class=\"modal\" id=\"pleaseWaitDiv\" role=\"dialog\" style=\"display:none\"><div class=\"modal-dialog\" data-backdrop=\"static\" data-keyboard=\"false\"><div class=\"modal-content\"><h4>' + title + '</h4><div class=\"progress progress-striped active\"><div class=\"progress-bar\" role=\"progressbar\" aria-valuenow=\"100\" aria-valuemin=\"0\" aria-valuemax=\"100\" style=\"width: 100%;\"></div></div></div></div>');\n    }\n  };\n})();\n\nfunction select2Setup(element, params, storeData) {\n  element.select2({\n    minimumInputLength: params.inputLength,\n    placeholder: params.placeholder,\n    initSelection: function (element, callback) {\n    },\n    ajax: {\n      url: params.url,\n      dataType: 'json',\n      quietMillis: 100,\n      data: function (term, page) {\n        return {\n          q: term,\n          limit: -1\n        };\n      },\n      results: function (data, page) {\n        if (storeData) {\n          storeData(data);\n        }\n        return {results: data.targetData}\n      }\n    },\n    formatResult: function (data) {\n      return \"<div class='select2-user-result'>\" + data.text + \"</div>\";\n    },\n    formatSelection: function (data) {\n      return data.text;\n    }\n  });\n}\n\nfunction getAJAXRequest(url, type, data) {\n  return $.ajax({\n    url: url,\n    type: type,\n    data: JSON.stringify(data),\n    dataType: 'json',\n    contentType: 'application/json'\n  });\n}\n\nfunction ajaxRequestHandle(route, method, data, action_msg, afterDone) {\n  var request = getAJAXRequest(route, method, data);\n  request.done(function (data) {\n    if (data.ok) {\n      if (action_msg === 'no_message') {\n        if (isExist(afterDone)) {\n          afterDone();\n        }\n      } else {\n        bootbox.alert(action_msg + \"成功\", function () {\n          if (isExist(afterDone)) {\n            afterDone();\n          }\n        });\n      }\n    } else {\n      bootbox.alert(action_msg + \"失败:\" + data.response);\n    }\n  });\n  request.fail(function (jqXHR, textStatus) {\n    bootbox.alert(action_msg + \"失败: \" + textStatus);\n  });\n}\n\nfunction unselected(element) {\n  if (element.length) {\n    element.prop('selectedIndex', -1);\n  }\n}\n\nfunction getRowChildren(element, idx) {\n  return element.find('tr:eq(' + idx + ')');\n}\n\nfunction getTableCellChildren(element, idx) {\n  return element.find('td:eq(' + idx + ')');\n}\n\nfunction tr_click(elements, func) {\n  if (elements.length > 0) {\n    elements.off('click');\n    elements.on('click', function (e) {\n      var me = $(this);\n      elements.removeClass('invoice-highlighted');\n      me.addClass('invoice-highlighted');\n\n      func(e, me.index());\n    });\n  }\n}\n\nfunction setHtmlElementDisabled(elem, disabled) {\n  if (elem.length > 0) {\n    var type = elem[0].nodeName.toLowerCase();\n    if (type === 'input' || type === 'select' || type === 'textarea') {\n      elem.prop('disabled', disabled);\n    } else {\n      if (disabled) {\n        elem.addClass('disabled');\n      } else {\n        elem.removeClass('disabled');\n      }\n    }\n  }\n}\n\nfunction showHtmlElement(elem, show) {\n  if (elem.length > 0) {\n    if (show) {\n      elem.show();\n    } else {\n      elem.hide();\n    }\n  }\n}\n\nfunction setElementValue(elem, value) {\n  if (elem.length > 0) {\n    var type = elem[0].nodeName.toLowerCase();\n    if (type === 'input' || type === 'select' || type === 'textarea') {\n      elem.val(value);\n    } else {\n      elem.text(value);\n    }\n  }\n}\n\nfunction getElementValue(elem) {\n  if (elem.length > 0) {\n    var type = elem[0].nodeName.toLowerCase();\n    if (type === 'input' || type === 'select' || type === 'textarea') {\n      return elem.val();\n    } else {\n      return elem.text();\n    }\n  }\n\n  return '';\n}\n\nfunction isJqueryElementEmpty(elem) {\n  return elem.length === 0;\n}\n\nfunction isNumeric(obj) {\n  return !jQuery.isArray(obj) && obj - parseFloat(obj) >= 0;\n}\n\nfunction numberIntValider(elem, min, max) {\n  var v = elem.val().replace(/[^0-9]/g, '');\n  v = parseInt(v);\n  if (isNaN(v) || v < min) {\n    v = min;\n    elem.val(min);\n  } else if (v > max) {\n    v = max;\n    elem.val(v);\n  } else {\n    elem.val(v);\n  }\n\n  return v;\n}\n\nfunction numberFloatValider(elem, initValue, minValue, maxValue) {\n  var v = elem.val();\n  var old = v;\n  if (isEmpty(v)) {\n    elem.val('');\n    return minValue;\n  }\n\n  if (!isNumeric(v)) {\n    v = initValue;\n  } else {\n    if (v < minValue) {\n      v = minValue;\n    }\n    if (maxValue && v > maxValue) {\n      v = maxValue;\n    }\n  }\n\n  if (old != v) {\n    elem.val(v);\n  }\n\n  return Number(v);\n}\n\nfunction getStrValue(value) {\n  if (isFinite(value)) {\n    if (typeof value === 'number') {\n      if (Math.floor(value) === value) {\n        return value.toString();\n      } else {\n        return toFixedStr(value, 3).replace(/([0-9]+(\\.[0-9]+[1-9])?)(\\.?0+$)/, '$1')\n      }\n//    } else if (typeof value === 'string') {\n//      return value.replace(/([0-9]+(\\.[0-9]+[1-9])?)(\\.?0+$)/,'$1');\n    } else {\n      return value;\n    }\n  } else {\n    return '';\n  }\n}\n\nfunction sameBill(a, b) {\n  return (a.bill_no === b.bill_no && getOrder(a.order_no, a.order_item_no) === getOrder(b.order_no, b.order_item_no));\n}\n\nfunction sortByKey(array, key, order) {\n  return array.sort(function (a, b) {\n    var x = a[key];\n    var y = b[key];\n    if (order === \"ASC\") {\n      return ((x < y) ? -1 : ((x > y) ? 1 : 0));\n    } else {\n      return ((x < y) ? 1 : ((x > y) ? -1 : 0));\n    }\n  });\n}\n\nfunction toFixedStr(num, precision) {\n  if (Math.abs(num) < 0.00001) {\n    return \"0\";\n  } else {\n//    var multiplier = Math.pow( 10, precision + 1 ),\n//        wholeNumber = Math.floor( num * multiplier );\n//    return String(Math.round( wholeNumber / 10 ) * 10 / multiplier);\n//\n    return (+(Math.round(+(num + 'e' + precision)) + 'e' + -precision)).toFixed(precision);\n  }\n}\n\nfunction toFixedNumber(num, precision) {\n  if (Math.abs(num) < 0.00001) {\n    return 0;\n  } else {\n//    var multiplier = Math.pow( 10, precision + 1 ),\n//        wholeNumber = Math.floor( num * multiplier );\n//    return Math.round( wholeNumber / 10 ) * 10 / multiplier;\n    return +((+(Math.round(+(num + 'e' + precision)) + 'e' + -precision)).toFixed(precision));\n  }\n}\n\nfunction initSelect(element, items, needEmpty, selectedValue) {\n  element.empty();\n  if (items.length) {\n    if (needEmpty) {\n      element.append('<option>无-取消选择</option>');\n    }\n\n    items.forEach(function (item) {\n      element.append('<option value=\"' + item + '\">' + item + '</option>');\n    });\n\n    if (selectedValue) {\n      if (items.indexOf(selectedValue) < 0) {\n        element.append('<option value=\"' + selectedValue + '\" selected>' + selectedValue + '</option>');\n      }\n      else {\n        element.val(selectedValue);\n      }\n    }\n    else {\n      unselected(element);\n    }\n  }\n  else if (selectedValue) {\n    element.append('<option>无-取消选择</option>');\n    element.append('<option value=\"' + selectedValue + '\" selected>' + selectedValue + '</option>');\n  }\n}\n\nfunction getSelectValue(element) {\n  var val = element.val();\n  if (val === '无-取消选择') {\n    unselected(element);\n    val = '';\n  }\n  return val;\n}\n\n// save to excel file\nvar tableToExcel = (function () {\n  var uri = 'data:application/vnd.ms-excel;base64,',\n    template = '<html xmlns:o=\"urn:schemas-microsoft-com:office:office\" xmlns:x=\"urn:schemas-microsoft-com:office:excel\" xmlns=\"http://www.w3.org/TR/REC-html40\"><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--><meta http-equiv=\"content-type\" content=\"text/plain; charset=utf-8\"/></head><body><table>{table}</table></body></html>',\n    base64 = function (s) {\n      return window.btoa(unescape(encodeURIComponent(s)))\n    },\n    format = function (s, c) {\n      return s.replace(/{(\\w+)}/g, function (m, p) {\n        return c[p];\n      })\n    };\n\n  return function (table, name, filename) {\n    var ctx = {worksheet: name || 'Worksheet', table: table};\n    window.location.href = uri + base64(format(template, ctx));\n  }\n})();\n\nfunction saveToExcel(bills, sheetname) {\n  if (bills.length > 0) {\n    var trArr = [];\n    trArr.push('<tr><th>状态</th><th>提单号</th><th>订单号</th><th>订单项次号</th><th>牌号</th><th>开单名称</th><th>销售部门</th><th>厚度</th><th>宽度</th><th>长度</th><th>尺寸类型</th><th>客户价格</th><th>车船价格</th><th>代收代付价格</th><th>单重</th><th>块数</th><th>总重量</th><th>发货仓库</th><th>合同号</th><th>创建日期</th><th>发货日期</th><th>创建人</th><th>发货人员</th></tr>');\n    var str = '<tr>';\n    for (var i = 0; i < 23; ++i) {\n      str += \"<td>{\" + i + \"}</td>\";\n    }\n    str += '</tr>';\n    bills.forEach(function (b) {\n      var price = getInvoicePriceInfo(b);\n      trArr.push(str.format(b.status, b.bill_no, b.order_no, b.order_item_no,\n        b.brand_no ? b.brand_no : '',\n        b.billing_name ? b.billing_name : '',\n        b.sales_dep ? b.sales_dep : '',\n        getStrValue(b.thickness), getStrValue(b.width), getStrValue(b.len),\n        b.size_type ? b.size_type : '', getStrValue(price.totalCustomerPrice), getStrValue(price.totalVehPrice), getStrValue(b.collection_price),\n        getStrValue(b.weight), getStrValue(b.block_num), getStrValue(b.total_weight),\n        b.ship_warehouse ? b.ship_warehouse : '',\n        b.contract_no ? b.contract_no : '',\n        date2Str(b.create_date), date2Str(b.shipping_date),\n        b.creater ? b.creater : '', b.shipper ? b.shipper : ''));\n    });\n\n    tableToExcel(trArr.join('\\n'), sheetname);\n  } else {\n    bootbox.alert('无数据可导出!');\n  }\n}\n\nfunction getStrByStatus(text, status) {\n  if (status === '已结算') {\n    return '<code style=\"color:#9564ad\">' + text + '</code>';\n  } else if (status === '已开票') {\n    return '<code style=\"color:blue\">' + text + '</code>';\n  } else if (status === '已回款') {\n    return '<code style=\"color:green\">' + text + '</code>';\n  } else if (status === '已配发') {\n    return '<code style=\"color:#dc143c\">' + text + '</code>';\n  } else if (status === '不需要结算') {\n    return '<code style=\"color:darkgray\">' + text + '</code>';\n  } else if (status === '未结算') {\n    return '<code style=\"color:red\">' + text + '</code>';\n  } else if (status === '待配发') {\n    return '<code style=\"color:#000000\">' + text + '</code>';\n  } else {\n    return '<code style=\"color:darkgray\">' + text + '</code>';\n  }\n}\n\nfunction getInvoicePriceInfo(bill) {\n  function inner_convert(p, state) {\n    return (p > 0) ? getStrByStatus(getStrValue(p), state) : '<code style=\"color:grey\">无</code>';\n  }\n\n  var totCustPrice = 0;\n  var totVehPrice = 0;\n  var price_html = '';\n  var ves_veh_price_html = '';\n  var tn = 0;\n  var str = '<div>{0}, <code style=\"color:black\">{1}</code>, {2}</div>';\n  bill.invoices.forEach(function (inv) {\n    if (inv.veh_ves_name) {\n      tn += inv.num;\n      var w = bill.block_num > 0 ? inv.num * bill.weight : inv.weight;\n      totCustPrice += inv.price * w;\n      price_html += str.format(inv.veh_ves_name, getStrValue(w), inner_convert(inv.price, bill.status));\n\n      totVehPrice += inv.veh_ves_price * w;\n      ves_veh_price_html += str.format(inv.veh_ves_name, getStrValue(w), inner_convert(inv.veh_ves_price, bill.status));\n\n      if (inv.vehicles.length) {\n        var vstr = '<div>-->{0}, <code style=\"color:black\">{1}</code>, {2}</div>';\n        inv.vehicles.forEach(function (vo) {\n          w = bill.block_num > 0 ? vo.send_num * bill.weight : vo.send_weight;\n          ves_veh_price_html += vstr.format(vo.veh_name, getStrValue(w), inner_convert(vo.veh_price, bill.status));\n          if (vo.veh_price > 0) {\n            totVehPrice += vo.veh_price * w;\n          }\n        });\n      }\n    }\n  });\n\n  bill.customer_price = totCustPrice;\n\n  return {\n    customerPriceHtml: price_html,\n    vehPriceHtml: ves_veh_price_html,\n    totalCustomerPrice: totCustPrice,\n    totalVehPrice: totVehPrice,\n    totalNumber: tn\n  };\n}\n\nfunction getAllList(needCheck, arr, field, sub_field) {\n  var res = [], i, len;\n  if (needCheck) {\n    if (sub_field && sub_field.length) {\n      for (i = 0, len = arr.length; i < len; ++i) {\n        var item = arr[i];\n        item[field].forEach(function (elem) {\n          var val = elem[sub_field];\n          if (val && res.indexOf(val) < 0) {\n            res.push(val);\n          }\n        })\n      }\n    } else {\n      for (i = 0, len = arr.length; i < len; ++i) {\n        var val = arr[i][field];\n        if (val && res.indexOf(val) < 0) {\n          res.push(val);\n        }\n      }\n    }\n  } else {\n    if (sub_field && sub_field.length) {\n      for (i = 0, len = arr.length; i < len; ++i) {\n        var item = arr[i];\n        item[field].forEach(function (elem) {\n          if (elem[sub_field]) {\n            res.push(elem[sub_field]);\n          }\n        })\n      }\n    } else {\n      for (i = 0, len = arr.length; i < len; ++i) {\n        if (arr[i][field]) {\n          res.push(arr[i][field]);\n        }\n      }\n    }\n  }\n\n  return res;\n};\n\nfunction makeOption(name) {\n  return '<option value=\"' + name + '\">' + name + '</option>';\n}\n\n\n//////////////////////////////////////////////////////////\n// class define\n//////////////////////////////////////////////////////////\nfunction operationEN2CN(text) {\n  if (text == 'contain') {\n    return '包含';\n  } else if (text == 'eq') {\n    return '等于';\n  } else if (text == 'neq') {\n    return '不等于';\n  } else if (text == 'gt') {\n    return '大于';\n  } else if (text == 'lt') {\n    return '小于';\n  } else if (text == 'gte') {\n    return '大于等于';\n  } else if (text == 'lte') {\n    return '小于等于';\n  } else if (text == 'in') {\n    return '区间';\n  }\n}\n\nvar SearchHandlerD = function (type) {\n  this.uiElems = {\n    sField: $('#all_search_fields'),\n    sOperation: $('#field_oper'),\n    bApply: $('#field_apply'),\n    iFieldValue: $('#field_val'),\n    sFieldValue: $('#field-val'),\n    iFieldValueDate: $('#field-val-date'),\n    iFieldValueDateGrp: $('#field-val-date-group'),\n    iFieldValue2: $('#field_val2'),\n    sFieldValue2: $('#field-val2'),\n    iFieldValueDate2: $('#field-val-date2'),\n    iFieldValueDateGrp2: $('#field-val-date-group2'),\n    fieldValGrp2: $('#field_val_grp2'),\n    tree: $('#search_condition_tree'),\n    bAnd: $('#search_and'),\n    bOr: $('#search_or'),\n    bDelete: $('#search_del'),\n    bExec: $('#search_exec'),\n    bOK: $('#search_ok'),\n    table: $('#search_table'),\n    thead: $('#search_thead'),\n    tbody: $('#search_tbody'),\n    div_result_show: $('#search_result'),\n    result_show: $('#search_result_show')\n  };\n\n  this.runOngoing = false;\n  this.type = type;\n  if (type === 'invoice') {\n    this.data = {\n      fields: [\n        {name_cn: '运单号', name_en: 'waybill_no', operations: ['contain', 'eq', 'neq']},\n        {name_cn: '车船号', name_en: 'vehicle_vessel_name', operations: ['contain', 'eq', 'neq']},\n        {name_cn: '开单名称', name_en: 'ship_name', operations: ['contain', 'eq', 'neq']},\n        {name_cn: '发货单位', name_en: 'ship_customer', operations: ['contain', 'eq', 'neq']},\n        {name_cn: '发货日期', name_en: 'ship_date', operations: ['eq', 'neq', 'gt', 'lt', 'gte', 'lte', 'in']},\n        {name_cn: '发货目的地', name_en: 'ship_to', operations: ['contain', 'eq', 'neq']},\n        {name_cn: '发货仓库', name_en: 'ship_warehouse', operations: ['contain', 'eq', 'neq']},\n        {name_cn: '发运总重', name_en: 'total_weight', operations: ['eq', 'neq', 'gt', 'lt', 'gte', 'lte', 'in']},\n        {name_cn: '发货人', name_en: 'shipper', operations: ['contain', 'eq', 'neq']},\n        {name_cn: '运单创建人', name_en: 'username', operations: ['contain', 'eq', 'neq']},\n        {name_cn: '运单状态', name_en: 'state', operations: ['contain', 'eq', 'neq']}\n      ]\n    };\n    showHtmlElement(this.uiElems.table, true);\n    showHtmlElement(this.uiElems.div_result_show, false);\n  } else if (type === 'bill') {\n    this.data = {\n      fields: [\n        {name_cn: '提单号', name_en: 'bill_no', operations: ['contain', 'eq', 'neq']},\n        {name_cn: '订单号', name_en: 'order_no', operations: ['contain', 'eq', 'neq']},\n        {name_cn: '项次号', name_en: 'order_item_no', operations: [], noOperation: true},\n        {name_cn: '牌号', name_en: 'brand_no', operations: ['contain', 'eq', 'neq']},\n        {name_cn: '开单名称', name_en: 'billing_name', operations: ['contain', 'eq', 'neq']},\n        {name_cn: '长', name_en: 'len', operations: ['eq', 'neq', 'gt', 'lt', 'gte', 'lte', 'in']},\n        {name_cn: '宽', name_en: 'width', operations: ['eq', 'neq', 'gt', 'lt', 'gte', 'lte', 'in']},\n        {name_cn: '厚', name_en: 'thickness', operations: ['eq', 'neq', 'gt', 'lt', 'gte', 'lte', 'in']},\n        {name_cn: '尺寸', name_en: 'size_type', operations: ['eq', 'neq']},\n        {name_cn: '单块重', name_en: 'weight', operations: ['eq', 'neq', 'gt', 'lt', 'gte', 'lte', 'in']},\n        {name_cn: '实际块数', name_en: 'block_num', operations: ['eq', 'neq', 'gt', 'lt', 'gte', 'lte', 'in']},\n        {name_cn: '总重量', name_en: 'total_weight', operations: ['eq', 'neq', 'gt', 'lt', 'gte', 'lte', 'in']},\n        {name_cn: '剩余块数或重量', name_en: 'left_num', operations: ['eq', 'neq', 'gt', 'lt', 'gte', 'lte', 'in']},\n        {name_cn: '存放仓库', name_en: 'warehouse', operations: ['contain', 'eq', 'neq']},\n        {name_cn: '发货仓库', name_en: 'ship_warehouse', operations: ['contain', 'eq', 'neq']},\n        {name_cn: '合同号', name_en: 'contract_no', operations: ['contain', 'eq', 'neq']},\n        {name_cn: '销售部门', name_en: 'sales_dep', operations: ['contain', 'eq', 'neq']},\n        {name_cn: '收货地址', name_en: 'shipping_address', operations: ['contain', 'eq', 'neq']},\n        {name_cn: '创建日期', name_en: 'create_date', operations: ['eq', 'neq', 'gt', 'lt', 'gte', 'lte', 'in']},\n        {name_cn: '配发日期', name_en: 'shipping_date', operations: ['eq', 'neq', 'gt', 'lt', 'gte', 'lte', 'in']},\n//        { name_cn : '结算日期', name_en : 'settle_date', operations: [ 'eq', 'neq', 'gt', 'lt', 'gte', 'lte', 'in' ] },\n        {name_cn: '创建人', name_en: 'creater', operations: ['contain', 'eq', 'neq']},\n        {name_cn: '发货人', name_en: 'shipper', operations: ['contain', 'eq', 'neq']},\n        {name_cn: '状态', name_en: 'status', operations: ['eq', 'neq']}\n      ]\n    };\n    showHtmlElement(this.uiElems.table, false);\n    showHtmlElement(this.uiElems.div_result_show, true);\n  } else if (type === 'invoice_bill') {\n    this.data = {\n      fields: [\n        {name_cn: '车船号', name_en: 'vehicle_vessel_name', operations: ['contain', 'eq', 'neq']},\n        {name_cn: '开单名称', name_en: 'ship_name', operations: ['contain', 'eq', 'neq']},\n        {name_cn: '发货目的地', name_en: 'ship_to', operations: ['contain', 'eq', 'neq']},\n        {name_cn: '发货日期', name_en: 'ship_date', operations: ['eq', 'neq', 'gt', 'lt', 'gte', 'lte', 'in']},\n        {name_cn: '提单号', name_en: 'bill_no', operations: ['contain', 'eq', 'neq']},\n        {name_cn: '订单号', name_en: 'order_no', operations: ['contain', 'eq', 'neq']}\n      ]\n    };\n  }\n\n  var fields = {};\n  this.data.fields.forEach(function (field) {\n    fields[field.name_cn] = field.name_en;\n  });\n\n  this.fields = fields;\n  this.selectOne = undefined;\n  this.result = {};\n};\n\nSearchHandlerD.prototype.initial = function (route) {\n  var self = this;\n  var str = '<tr>';\n  self.uiElems.sField.empty();\n  this.data.fields.forEach(function (field) {\n    if (!field.noOperation) {\n      var opt = '<option value=\"{0}\">{1}</option>'.format(field.name_en, field.name_cn);\n      self.uiElems.sField.append(opt);\n    }\n\n    str += \"<th>\" + field.name_cn + \"</th>\";\n  });\n  if (self.type != 'invoice_bill') {\n    self.uiElems.thead.empty();\n    self.uiElems.thead.append(str + '</tr>');\n    self.uiElems.tbody.empty();\n  }\n\n  self.uiElems.bApply.addClass('disabled');\n  self.uiElems.bOK.addClass('disabled');\n  unselected(self.uiElems.sOperation);\n  self.uiElems.iFieldValue.val('');\n  self.uiElems.sFieldValue.val('');\n  self.uiElems.iFieldValueDate.val('');\n  self.uiElems.iFieldValue2.val('');\n  self.uiElems.sFieldValue2.val('');\n  self.uiElems.iFieldValueDate2.val('');\n  self.uiElems.iFieldValueDateGrp.datetimepicker(getDateTimePickerOptions()).on('dp.change', function () {\n    var oper = self.uiElems.sOperation.val();\n    var v = self.uiElems.iFieldValueDate.val();\n    if (oper && oper != 'in') {\n      setHtmlElementDisabled(self.uiElems.bApply, !v);\n    }\n  });\n  self.uiElems.iFieldValueDateGrp2.datetimepicker(getDateTimePickerOptions()).on('dp.change', function () {\n    var v = self.uiElems.iFieldValueDate.val();\n    setHtmlElementDisabled(self.uiElems.bApply, !v);\n  });\n\n  self.uiElems.tree.jstree({\n    \"core\": {\n      \"animation\": 0,\n      \"check_callback\": true,\n      'data': {\n        'text': 'AND (并且)',\n        'state': {\n          'opened': true,\n          'selected': true\n        }\n      }\n    }\n  });\n\n  self.uiElems.tree.jstree('reflesh');\n  self.runOngoing = false;\n\n  self.uiElems.sField.on('change', function () {\n    var value = this.value;\n    if (value) {\n      self.uiElems.iFieldValue.val('');\n      self.uiElems.sFieldValue.val('');\n      self.uiElems.iFieldValueDate.val('');\n      self.uiElems.iFieldValue2.val('');\n      self.uiElems.sFieldValue2.val('');\n      self.uiElems.iFieldValueDate2.val('');\n      self.uiElems.iFieldValue.prop('disabled', true);\n      self.uiElems.iFieldValue2.prop('disabled', true);\n      self.uiElems.fieldValGrp2.hide();\n\n      self.uiElems.bApply.addClass('disabled');\n      self.uiElems.sOperation.empty();\n      for (var i = 0; i < self.data.fields.length; ++i) {\n        var field = self.data.fields[i];\n        if (field.name_en == value) {\n          field.operations.forEach(function (operation) {\n            var opt = '<option value=\"{0}\">{1}</option>'.format(operation, operationEN2CN(operation));\n            self.uiElems.sOperation.append(opt);\n          });\n\n          if (value.indexOf('date') >= 0) {\n            showHtmlElement(self.uiElems.iFieldValueDateGrp, true);\n            showHtmlElement(self.uiElems.iFieldValue, false);\n            showHtmlElement(self.uiElems.sFieldValue, false);\n          } else if (value == 'status' || value == 'size_type') {\n            showHtmlElement(self.uiElems.sFieldValue, true);\n            showHtmlElement(self.uiElems.iFieldValue, false);\n            showHtmlElement(self.uiElems.iFieldValueDateGrp, false);\n            self.uiElems.sFieldValue.empty();\n            if (value == 'status') {\n              self.uiElems.sFieldValue.append('<option>新建</option>');\n              self.uiElems.sFieldValue.append('<option>已配发</option>');\n              self.uiElems.sFieldValue.append('<option>已结算</option>');\n            } else {\n              self.uiElems.sFieldValue.append('<option>定尺</option>');\n              self.uiElems.sFieldValue.append('<option>单定</option>');\n            }\n            unselected(self.uiElems.sFieldValue);\n          } else {\n            showHtmlElement(self.uiElems.iFieldValue, true);\n            showHtmlElement(self.uiElems.iFieldValueDateGrp, false);\n            showHtmlElement(self.uiElems.sFieldValue, false);\n          }\n          break;\n        }\n      }\n      unselected(self.uiElems.sOperation);\n    }\n  });\n\n  self.uiElems.sOperation.on('change', function () {\n    var oper = this.value;\n    self.uiElems.iFieldValue.prop('disabled', !oper);\n    self.uiElems.sFieldValue.prop('disabled', !oper);\n    self.uiElems.iFieldValueDate.prop('disabled', !oper);\n    self.uiElems.iFieldValue2.prop('disabled', !oper);\n    self.uiElems.sFieldValue2.prop('disabled', !oper);\n    self.uiElems.iFieldValueDate2.prop('disabled', !oper);\n\n    var fieldname = self.uiElems.sField.val();//.find('option:selected').text();\n    if (oper == 'in') {\n      showHtmlElement(self.uiElems.fieldValGrp2, true);\n      if (fieldname.indexOf('date') >= 0) {\n        showHtmlElement(self.uiElems.iFieldValueDateGrp2, true);\n        showHtmlElement(self.uiElems.iFieldValue2, false);\n      } else {\n        showHtmlElement(self.uiElems.iFieldValueDateGrp2, false);\n        showHtmlElement(self.uiElems.iFieldValue2, true);\n      }\n    } else {\n      showHtmlElement(self.uiElems.fieldValGrp2, false);\n      showHtmlElement(self.uiElems.iFieldValueDateGrp2, false);\n      showHtmlElement(self.uiElems.iFieldValue2, true);\n    }\n  });\n\n  self.uiElems.iFieldValue.on('keyup paste', function (e) {\n    e.stopImmediatePropagation();\n    var oper = self.uiElems.sOperation.val();\n    if (oper && oper != 'in') {\n      setHtmlElementDisabled(self.uiElems.bApply, !this.value);\n    }\n  });\n  self.uiElems.sFieldValue.on('change', function (e) {\n    e.stopImmediatePropagation();\n    var oper = self.uiElems.sOperation.val();\n    if (oper && oper != 'in') {\n      setHtmlElementDisabled(self.uiElems.bApply, !this.value);\n    }\n  });\n  self.uiElems.iFieldValue2.on('keyup paste', function (e) {\n    e.stopImmediatePropagation();\n    setHtmlElementDisabled(self.uiElems.bApply, !this.value);\n  });\n\n  self.uiElems.bApply.on('click', function () {\n    var field = self.uiElems.sField.find('option:selected').text();//.val();\n    var oper = self.uiElems.sOperation.find('option:selected').text();//.val();\n    var value = self.uiElems.iFieldValue.val();\n    var isDate = false;\n    if (field.indexOf('日期') >= 0) {\n      value = self.uiElems.iFieldValueDate.val();\n      isDate = true;\n    }\n    if (oper == '区间') {\n      var v2 = self.uiElems.iFieldValue2.val();\n      if (isDate) {\n        v2 = self.uiElems.iFieldValueDate2.val();\n      }\n      self.createNode({'text': field + ' ' + oper + ' ' + value + ' ' + v2});\n    } else {\n      if (field == '状态' || field == '尺寸') {\n        value = self.uiElems.sFieldValue.val();\n      }\n      self.createNode({'text': field + ' ' + oper + ' ' + value});\n    }\n  });\n\n  self.uiElems.bAnd.on('click', function () {\n    self.createNode({\"text\": \"AND (并且)\"});\n  });\n\n  self.uiElems.bOr.on('click', function () {\n    self.createNode({\"text\": \"OR (或者)\"});\n  });\n\n  self.uiElems.bDelete.on('click', function () {\n    var ref = self.uiElems.tree.jstree(true);\n    if (ref) {\n      var sel = ref.get_selected();\n      if (!sel.length) {\n        return false;\n      }\n      var parent = ref.get_parent(sel);\n      if (parent && parent != '#') {\n        ref.delete_node(sel);\n        ref.select_node(parent, true);\n      }\n    }\n  });\n\n  self.uiElems.bExec.on('click', function () {\n    if (self.runOngoing) {\n      return;\n    }\n\n    var ref = self.uiElems.tree.jstree(true);\n    var json = ref.get_json('#');\n    self.runOngoing = true;\n    $.get(route, {q: JSON.stringify(json[0]), isNeedAnalysis: true, field: self.fields}, function (data) {\n      var result = JSON.parse(data);\n      console.log(result.ok);\n      if (result.ok) {\n        self.result = result;\n        self.selectOne = -1;\n        self._setDataAndShow();\n\n        if (result.number > 500) {\n          bootbox.alert('当前查询结果 = ' + result.number + ', 数量太多（超过500个），请进一步限定条件！');\n        }\n      } else {\n        bootbox.alert(\"错误的条件!\");\n      }\n\n      self.runOngoing = false;\n    });\n  });\n};\n\nSearchHandlerD.prototype.okEventHandler = function (ok) {\n  var self = this;\n  this.uiElems.bOK.on('click', function () {\n    if (self.type == 'invoice') {\n      if (undefined != self.selectOne && self.selectOne >= 0) {\n        ok(self.result, self.selectOne);\n      }\n    } else {\n      ok(self.result);\n    }\n  });\n};\n\nSearchHandlerD.prototype._setDataAndShow = function () {\n  var self = this;\n\n  self.uiElems.tbody.empty();\n  if (self.type == 'invoice') {\n    var str = \"<tr><td>{0}</td><td>{1}</td><td>{2}</td><td>{3}</td><td>{4}</td><td>{5}</td><td>{6}</td><td>{7}</td><td>{8}</td><td>{9}</td><td>{10}</td></tr>\";\n    $.each(self.result.invoices, function (index, inv) {\n      var state = '<span class=\"label label-success\">新建</span>';\n      if (inv.state === '已结算') {\n        state = '<span class=\"label label-default\">已结算</span>';\n      } else if (inv.state === '已配发') {\n        state = '<span class=\"label label-info\">已配发</span>';\n      }\n      var html_row_str = str.format(inv.waybill_no,\n        inv.vehicle_vessel_name ? inv.vehicle_vessel_name : '',\n        inv.ship_name ? inv.ship_name : '',\n        inv.ship_customer ? inv.ship_customer : '',\n        inv.ship_date ? date2Str(inv.ship_date) : '',\n        inv.ship_to ? inv.ship_to : '',\n        inv.ship_warehouse ? inv.ship_warehouse : '',\n        getStrValue(inv.total_weight),\n        inv.shipper ? inv.shipper : '',\n        inv.username ? inv.username : '',\n        state);\n      self.uiElems.tbody.append(html_row_str);\n    });\n\n    tr_click(self.uiElems.tbody.find('tr'), function (e, index) {\n      if (index >= 0) {\n        self.uiElems.bOK.removeClass('disabled');\n        self.selectOne = index;\n      }\n    });\n  } else {\n//    $.each(data, function(index, bill ) {\n//      var html_row_str = str.format(bill.bill_no, bill.order_no, bill.order_item_no,\n//          bill.brand_no ? bill.brand_no: '',\n//          bill.billing_name ? bill.billing_name: '',\n//          bill.len ? bill.len: '',\n//          bill.width ? bill.width: '',\n//          bill.thickness ? bill.thickness: '',\n//          bill.size_type ? bill.size_type: '',\n//          bill.weight ? bill.weight.toFixed(3): '',\n//          bill.price ? bill.price: '',\n//          bill.block_num ? bill.block_num: '',\n//          bill.total_weight ? bill.total_weight: '',\n//          bill.left_num ? bill.left_num: '',\n//          bill.warehouse ? bill.warehouse: '',\n//          bill.ship_warehouse ? bill.ship_warehouse: '',\n//          bill.contract_no ? bill.contract_no: '',\n//          bill.sales_dep ? bill.sales_dep: '',\n//          bill.shipping_address ? bill.shipping_address: '',\n//          bill.create_date ? new Date(bill.create_date).yyyymmdd_cn(): '',\n//          bill.status ? bill.status: ''\n//      );\n//      self.uiElems.tbody.append(html_row_str);\n//    });\n\n    if (self.result.bills.length) {\n      setHtmlElementDisabled(self.uiElems.bOK, false);\n      self.uiElems.result_show.text('共查询出提单记录数:' + self.result.bills.length);\n    } else {\n      setHtmlElementDisabled(self.uiElems.bOK, true);\n      self.uiElems.result_show.text('没有找到数据, 请检查查询条件!');\n    }\n  }\n};\n\nSearchHandlerD.prototype.createNode = function (obj) {\n  var ref = this.uiElems.tree.jstree(true);\n  if (!ref) return false;\n  createTreeNode(ref, obj);\n};\n\nfunction createTreeNode(ref, obj) {\n  var sel = ref.get_selected();\n  if (!sel.length) {\n    sel = ref.create_node('#', obj);\n    ref.select_node(sel, true);\n    ref.open_node(sel, true);\n    return true;\n  }\n\n  var text = ref.get_text(sel);\n  if (text == obj['text']) {\n    return false;\n  }\n  if (text.indexOf('AND') >= 0 || text.indexOf('OR') >= 0) {\n    sel = sel[0];\n    sel = ref.create_node(sel, obj);\n  } else {\n    sel = ref.get_parent(sel);\n    if (!sel.length) {\n      return false;\n    }\n    text = ref.get_text(sel);\n    if (text == obj['text']) { // AND 下面不能在插入AND, 同样OR也是\n      return false;\n    }\n    sel = ref.create_node(sel, obj);\n  }\n  ref.deselect_all(true);\n  ref.select_node(sel, true);\n  return true;\n}\n\n///\nvar FilterElementD = function (elemName, initOptions, dropRight, withSelectedAll, next) {\n  this.elem = elemName;\n  this.options = initOptions.slice();\n  this.visibleOptions = initOptions.slice();\n  this.selected = [];\n\n  initSelect(this.elem, this.options, false);\n\n  var self = this;\n  var option = {\n    buttonWidth: '100%',\n    maxHeight: 300,\n    dropRight: dropRight,\n    enableFiltering: true,\n    filterPlaceholder: '查询',\n\n    buttonText: function (options, select) {\n      if (options.length === 0) {\n        return '未选择...';\n      } else if (options.length > 1) {\n        return '选择了' + options.length + '个';\n      } else {\n        var labels = [];\n        options.each(function () {\n          if ($(this).attr('label') !== undefined) {\n            labels.push($(this).attr('label'));\n          } else {\n            labels.push($(this).html());\n          }\n        });\n        return labels.join(', ');\n      }\n    },\n\n    onChange: function (option, checked) {\n      var v = 'select-all-value';\n      if (option) {\n        v = option.val();\n      }\n\n      if (checked === true) {\n        if (v === 'select-all-value') {\n          self.selected = self.visibleOptions.slice();\n        } else {\n          if (self.selected.indexOf(v) < 0) {\n            self.selected.push(v);\n          }\n        }\n      } else if (checked === false) {\n        if (v === 'select-all-value') {\n          self.selected = [];\n        } else {\n          for (var i = self.selected.length - 1; i >= 0; --i) {\n            if (self.selected[i] === v) {\n              self.selected.remove(i);\n              break;\n            }\n          }\n        }\n      }\n\n      if (next) {\n        next(self.selected);\n      }\n    }\n  };\n\n  if (withSelectedAll) {\n    option.includeSelectAllOption = true;\n    option.selectAllText = '选择全部';\n    option.selectAllValue = 'select-all-value';\n  }\n\n  this.elem.multiselect(option);\n};\n\nFilterElementD.prototype.rebuild = function (visibleOptions, selectedValues) {\n  this.visibleOptions = visibleOptions.slice();\n  initSelect(this.elem, visibleOptions, false);\n  this.elem.multiselect('rebuild');\n  if (selectedValues) {\n    this.elem.multiselect('select', selectedValues);\n  }\n};\n\nFilterElementD.prototype.selectAll = function () {\n  this.elem.multiselect('selectAll', false);\n  this.elem.multiselect('updateButtonText');\n};\n\nFilterElementD.prototype.selectNone = function () {\n  return this.selected.length === 0;\n};\n\nFilterElementD.prototype.rebuildAndSelectAll = function (visibleOptions) {\n  var self = this;\n  self.visibleOptions = visibleOptions.slice(0);\n  initSelect(self.elem, visibleOptions, false);\n  self.elem.multiselect('rebuild');\n  self.elem.multiselect('selectAll', false);\n  self.elem.multiselect('updateButtonText');\n  self.selected = visibleOptions.slice(0);\n};\n\nFilterElementD.prototype.disabled = function (disalbed) {\n  if (disalbed) {\n    this.elem.multiselect('disable');\n  } else {\n    this.elem.multiselect('enable');\n  }\n};\n"]}